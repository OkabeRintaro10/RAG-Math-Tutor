[2025-11-06 10:14:30,047: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:14:39,637: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:16:00,376: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:16:28,772: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:17:32,813: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:17:59,983: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:21:08,882: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:23:15,463: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:24:07,430: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:24:35,681: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:24:47,099: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:25:19,633: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:26:13,917: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:26:13,918: INFO: 3605202357]: data/pdfs/test.txt]
[2025-11-06 10:26:37,157: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:26:37,158: INFO: 3145936182]: test.txt]
[2025-11-06 10:27:03,718: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:27:03,720: INFO: 3611695694]: data/pdfs/test.txt]
[2025-11-06 10:27:55,979: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:27:55,980: INFO: 2454562226]: data/pdfs/test.txt]
[2025-11-06 10:28:26,254: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:28:26,255: INFO: 2454562226]: data/pdfs/test.txt]
[2025-11-06 10:35:37,744: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:35:37,745: INFO: 2454562226]: data/pdfs/test.txt]
[2025-11-06 10:35:47,094: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:35:47,238: INFO: 1208157105]: data/pdfs/test.txt]
[2025-11-06 10:35:47,479: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-00:batchEmbedContents "HTTP/1.1 404 Not Found"]
[2025-11-06 10:36:08,536: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:36:08,579: INFO: 1208157105]: data/pdfs/test.txt]
[2025-11-06 10:36:10,183: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-06 10:37:31,321: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:37:31,366: INFO: 1208157105]: data/pdfs/test.txt]
[2025-11-06 10:37:32,993: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-06 10:37:38,476: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:37:38,523: INFO: 1208157105]: data/pdfs/test.txt]
[2025-11-06 10:37:40,161: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-06 10:43:34,730: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:43:34,774: INFO: 4138966511]: data/pdfs/test.txt]
[2025-11-06 10:46:10,090: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 10:46:10,132: INFO: 1522431127]: data/pdfs/test.txt]
[2025-11-06 10:46:11,793: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-06 11:02:05,797: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 11:02:09,911: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 11:02:09,954: INFO: 1760340527]: data/pdfs/test.txt]
[2025-11-06 11:11:04,240: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-06 11:11:04,289: INFO: 1760340527]: data/pdfs/test.txt]
[2025-11-07 04:45:53,266: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:47:13,335: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:47:49,896: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:49:09,215: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:49:09,291: INFO: 1189499601]: data/pdfs/test.txt]
[2025-11-07 04:49:10,964: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 04:49:48,208: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:49:48,252: INFO: 2128767732]: data/pdfs/test.txt]
[2025-11-07 04:49:49,807: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 04:50:55,783: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:50:55,828: INFO: 2857766088]: data/pdfs/test.txt]
[2025-11-07 04:50:57,403: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 04:53:03,142: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:53:03,186: INFO: 493370403]: data/pdfs/test.txt]
[2025-11-07 04:53:04,740: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 04:55:56,869: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 04:55:56,910: INFO: 2089868215]: data/pdfs/test.txt]
[2025-11-07 04:55:58,521: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:04:57,429: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:07,729: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:12,734: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:12,737: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:17,741: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:22,745: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:27,752: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:32,756: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:39,379: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:44,383: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:49,388: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:54,393: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:05:59,397: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:04,401: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:10,998: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:16,002: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:21,006: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:26,014: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:31,020: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:36,024: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:41,028: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:47,621: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:52,626: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:06:57,632: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:02,636: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:07,650: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:12,655: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:19,299: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:24,307: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:29,312: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:34,316: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:39,322: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:44,327: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:49,332: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:07:55,988: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:00,993: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:05,998: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:11,003: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:16,007: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:21,011: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:27,649: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:32,654: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:37,658: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:42,662: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:47,667: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:52,672: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:08:59,324: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:04,331: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:09,335: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:14,339: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:19,344: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:24,349: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:29,354: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:35,981: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:40,985: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:45,989: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:50,993: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:09:55,999: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:01,002: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:07,624: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:12,629: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:17,633: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:22,637: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:27,644: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:29,427: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:10:29,429: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:10:32,647: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:37,653: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:44,426: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:45,436: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:10:45,436: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:10:49,431: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:54,435: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:10:59,439: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:04,443: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:09,449: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:16,038: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:21,043: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:26,048: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:31,054: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:36,058: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:41,064: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:46,067: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:52,662: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:11:57,666: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:02,672: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:07,676: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:12,680: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:35,061: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:40,065: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:40,067: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:45,073: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:48,658: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:12:48,659: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:12:50,080: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:12:56,686: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:01,692: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:06,697: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:11,703: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:16,708: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:21,713: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:26,717: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:38,331: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:43,337: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:47,961: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:13:47,962: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:13:48,341: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:53,346: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:13:58,350: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:04,950: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:09,954: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:14,959: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:19,964: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:24,969: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:29,973: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:34,978: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:41,588: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:46,595: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:51,601: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:14:56,605: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:01,609: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:06,614: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:13,227: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:18,232: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:22,613: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:15:22,614: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:15:23,236: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:28,241: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:38,253: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:43,258: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:46,563: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:15:46,563: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:15:46,734: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:15:46,739: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:15:47,126: INFO: _client]: HTTP Request: PUT http://localhost:6333/collections/docs "HTTP/1.1 200 OK"]
[2025-11-07 06:15:47,128: ERROR: main]: PDF file not found: C:\Users\Nitin Kausik Remella\Desktop\test.txt]
[2025-11-07 06:15:49,863: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:54,868: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:15:59,872: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:04,876: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:09,883: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:14,888: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:21,497: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:26,503: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:31,508: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:36,513: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:41,519: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:46,524: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:51,529: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:16:58,133: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:03,142: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:08,147: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:13,161: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:18,169: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:23,174: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:29,793: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:34,800: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:39,806: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:44,812: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:49,816: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:17:54,819: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:01,432: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:06,439: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:09,033: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:18:09,033: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:18:09,119: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:18:09,121: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:18:09,122: INFO: data_ingestion]: data/pdfs/test.txt]
[2025-11-07 06:18:09,482: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:18:09,483: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:18:09,554: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:18:09,556: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:18:11,096: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:18:11,422: INFO: _client]: HTTP Request: PUT http://localhost:6333/collections/docs/points?wait=true "HTTP/1.1 200 OK"]
[2025-11-07 06:18:11,432: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:18:11,433: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:18:11,508: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:18:11,510: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:18:11,514: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:16,520: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:21,524: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:26,529: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:31,540: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:38,308: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:43,313: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:48,318: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:53,324: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:18:58,331: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:03,337: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:09,730: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:14,734: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:19,741: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:24,746: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:29,751: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:34,756: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:39,763: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:46,405: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:51,409: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:19:56,413: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:01,417: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:06,424: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:11,430: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:18,041: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:23,046: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:28,051: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:33,055: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:38,059: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:43,063: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:48,067: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:54,689: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:20:59,694: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:04,699: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:09,704: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:14,710: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:19,716: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:26,328: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:31,334: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:36,338: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:41,343: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:46,348: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:51,352: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:21:57,970: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:02,979: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:07,985: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:12,990: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:18,953: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:23,958: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:28,962: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:38,298: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:39,130: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:22:39,130: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:22:39,298: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:22:39,300: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:22:39,301: INFO: data_ingestion]: data/pdfs/test.txt]
[2025-11-07 06:22:39,580: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:22:39,580: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:22:39,663: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:22:39,665: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:22:41,631: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:22:41,942: INFO: _client]: HTTP Request: PUT http://localhost:6333/collections/docs/points?wait=true "HTTP/1.1 200 OK"]
[2025-11-07 06:22:41,980: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:22:41,980: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:22:42,049: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:22:42,053: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:22:43,306: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:48,310: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:53,318: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:22:58,328: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:03,332: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:09,959: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:14,963: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:19,968: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:24,972: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:29,976: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:34,980: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:41,605: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:46,611: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:51,615: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:23:56,620: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:01,625: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:06,642: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:11,647: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:18,301: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:23,305: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:28,309: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:33,317: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:38,321: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:43,326: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:49,943: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:54,948: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:24:59,953: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:04,957: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:09,961: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:14,970: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:21,556: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:26,561: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:31,566: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:36,571: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:41,576: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:46,580: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:51,597: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:25:58,216: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:03,220: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:08,231: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:13,238: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:18,244: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:23,250: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:29,786: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:34,791: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:39,796: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:44,800: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:49,810: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:54,814: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:26:59,821: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:06,374: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:11,378: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:16,382: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:21,387: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:26,392: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:31,398: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:38,046: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:43,051: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:48,055: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:53,060: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:27:58,064: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:03,069: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:08,076: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:14,693: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:19,699: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:24,706: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:29,712: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:34,717: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:39,724: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:46,388: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:48,418: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:28:48,418: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:28:48,581: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:28:48,583: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:28:51,392: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:28:56,398: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:01,403: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:06,408: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:11,415: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:16,419: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:23,095: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:28,100: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:33,105: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:38,111: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:43,116: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:48,121: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:54,780: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:29:59,785: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:04,789: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:09,794: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:14,798: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:19,803: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:26,460: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:31,465: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:36,470: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:41,475: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:46,479: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:51,484: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:30:56,488: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:03,137: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:08,141: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:13,145: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:18,150: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:23,156: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:28,161: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:34,803: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:39,811: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:44,815: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:49,820: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:54,825: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:31:59,829: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:04,836: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:11,470: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:16,474: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:21,479: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:26,484: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:31,489: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:36,493: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:43,109: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:48,114: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:53,120: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:32:58,123: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:03,129: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:08,134: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:13,139: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:19,698: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:24,704: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:29,709: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:34,714: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:39,719: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:44,724: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:51,304: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:33:56,309: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:01,313: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:06,318: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:11,323: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:16,327: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:21,333: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:27,845: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:32,850: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:37,856: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:42,862: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:47,869: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:34:53,260: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:00,315: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:05,325: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:10,330: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:15,335: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:20,339: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:25,343: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:32,033: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:37,037: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:42,042: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:47,047: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:53,548: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:35:58,554: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:03,275: INFO: test]: Sending event 'rag/query_pdf_ai' with question: 'What is the main topic of the document?']
[2025-11-07 06:36:03,275: ERROR: test]: Error sending event: ]
[2025-11-07 06:36:03,275: ERROR: test]: Please ensure the Inngest Dev Server is running.]
[2025-11-07 06:36:05,269: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:10,274: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:15,280: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:20,285: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:25,289: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:30,295: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:35,303: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:42,024: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:47,028: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:52,032: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:36:57,040: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:02,046: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:07,050: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:13,774: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:18,779: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:23,783: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:28,787: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:33,791: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:38,796: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:43,800: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:50,524: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:37:54,873: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:37:54,874: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:37:55,039: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:37:55,042: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:37:55,531: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:00,535: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:05,540: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:10,545: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:15,550: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:22,271: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:27,281: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:32,285: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:37,290: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:42,294: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:38:47,298: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,600: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:39:58,601: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:39:58,754: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,756: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,771: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,772: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,772: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,772: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:39:58,772: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:03,543: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:40:03,543: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:40:03,616: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:40:03,618: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:40:05,493: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:10,497: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:15,510: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:20,519: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:25,523: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:30,527: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:37,249: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:42,253: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:47,257: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:52,262: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:40:57,267: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:02,272: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:07,282: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:14,006: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:19,011: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:24,015: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:29,020: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:34,024: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:39,033: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:45,757: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:47,100: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:41:47,101: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:41:47,256: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:41:47,258: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:41:50,761: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:41:55,765: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:00,773: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:05,777: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:10,782: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:15,786: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:22,500: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:27,505: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:32,509: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:37,515: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:44,328: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:49,334: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:42:56,027: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:01,031: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:06,037: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:11,041: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:16,046: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:21,054: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:27,800: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:32,805: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:37,809: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:42,813: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:47,819: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:49,086: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:43:49,087: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:43:49,240: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:43:49,242: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:43:49,739: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:43:49,788: INFO: _client]: HTTP Request: POST http://localhost:6333/collections/docs/points/search "HTTP/1.1 200 OK"]
[2025-11-07 06:43:52,824: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:43:57,829: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:04,482: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:09,486: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:14,491: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:19,496: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:24,501: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:29,505: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:36,258: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:41,262: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:46,268: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:51,282: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:44:56,286: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:01,291: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:06,295: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:13,008: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:18,013: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:23,018: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:28,024: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:33,029: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:38,034: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:44,750: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:49,754: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:54,759: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:45:59,763: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:04,769: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:09,773: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:16,487: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:21,492: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:26,497: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:31,501: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:36,505: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:41,509: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:46,515: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:53,242: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:46:58,248: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:03,253: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:08,257: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:13,261: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:18,471: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:24,570: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:47:24,571: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:47:24,730: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:47:24,732: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:47:25,704: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:47:25,734: INFO: _client]: HTTP Request: POST http://localhost:6333/collections/docs/points/search "HTTP/1.1 200 OK"]
[2025-11-07 06:47:25,757: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:30,763: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:35,769: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:40,777: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:45,783: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:50,789: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:47:51,418: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:47:51,418: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:47:51,495: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:47:51,499: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:47:52,576: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:47:52,593: INFO: _client]: HTTP Request: POST http://localhost:6333/collections/docs/points/search "HTTP/1.1 200 OK"]
[2025-11-07 06:47:55,796: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:02,450: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:07,456: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:12,461: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:17,465: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:22,473: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:27,478: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:34,156: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:39,161: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:44,166: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:49,178: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:54,183: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:48:58,187: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:48:58,188: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:48:58,347: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:48:58,349: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:48:58,865: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:48:58,880: INFO: _client]: HTTP Request: POST http://localhost:6333/collections/docs/points/search "HTTP/1.1 200 OK"]
[2025-11-07 06:49:00,201: INFO: _client]: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"]
[2025-11-07 06:49:03,504: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:10,178: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:15,183: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:20,187: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:25,192: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:30,201: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:35,205: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:41,888: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:46,892: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:51,896: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:49:56,903: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:01,907: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:06,913: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:11,920: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:18,664: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:23,672: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:28,676: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:33,683: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:38,691: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:43,697: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:50,428: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:50:55,432: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:00,437: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:05,442: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:07,098: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:51:07,098: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:51:07,174: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:51:07,178: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:51:07,179: INFO: data_ingestion]: data/pdfs/transformers.txt]
[2025-11-07 06:51:07,403: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:51:07,403: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:51:07,476: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:51:07,478: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:51:08,202: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:51:08,809: INFO: _client]: HTTP Request: PUT http://localhost:6333/collections/docs/points?wait=true "HTTP/1.1 200 OK"]
[2025-11-07 06:51:08,897: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:51:08,897: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:51:08,986: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:51:08,988: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:51:10,452: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:15,457: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:22,160: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:27,165: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:32,170: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:37,176: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:42,181: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:47,186: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:52,190: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:51:58,877: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:02,228: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-07 06:52:02,229: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-07 06:52:02,304: INFO: _client]: HTTP Request: GET http://localhost:6333 "HTTP/1.1 200 OK"]
[2025-11-07 06:52:02,307: INFO: _client]: HTTP Request: GET http://localhost:6333/collections/docs/exists "HTTP/1.1 200 OK"]
[2025-11-07 06:52:02,811: INFO: _client]: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-embedding-001:batchEmbedContents "HTTP/1.1 200 OK"]
[2025-11-07 06:52:02,849: INFO: _client]: HTTP Request: POST http://localhost:6333/collections/docs/points/search "HTTP/1.1 200 OK"]
[2025-11-07 06:52:04,364: INFO: _client]: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"]
[2025-11-07 06:52:06,331: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:11,335: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:16,340: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:21,346: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:26,360: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:33,047: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:38,053: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:43,057: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:48,063: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:53,069: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:52:58,074: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:04,742: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:09,747: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:14,751: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:19,756: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:24,765: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:29,774: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:34,781: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:41,454: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:46,460: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:51,467: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:53:56,475: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-07 06:54:01,481: INFO: _client]: HTTP Request: POST http://127.0.0.1:8288/fn/register "HTTP/1.1 200 OK"]
[2025-11-08 04:40:59,797: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:40:59,800: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:42:57,095: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:42:57,096: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:43:52,113: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:43:52,114: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:47:48,331: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:47:48,332: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:48:37,717: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:48:37,718: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:49:37,598: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:49:37,599: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:54:52,876: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:54:52,877: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:55:16,708: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 04:55:16,709: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 04:57:16,378: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 04:57:16,379: INFO: main]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/transformers.txt]
[2025-11-08 04:57:16,383: INFO: data_ingestion]: data/pdfs/transformers.txt]
[2025-11-08 04:57:16,514: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 04:57:16,515: INFO: main]: Embedding 2 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/transformers.txt]
[2025-11-08 04:57:17,282: INFO: main]: Upserting to Qdrant: 2 vectors]
[2025-11-08 04:57:17,408: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 04:57:17,410: INFO: main]: Ingest completed: 2 chunks ingested]
[2025-11-08 04:57:52,148: INFO: main]: Starting RAG query function]
[2025-11-08 05:01:11,876: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:01:11,878: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 05:01:48,635: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:01:48,637: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 05:02:02,228: INFO: main]: Starting RAG query function]
[2025-11-08 05:02:02,240: INFO: main]: Running validate_question node]
[2025-11-08 05:02:03,903: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:02:05,696: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:02:05,703: INFO: main]: Input validation passed.]
[2025-11-08 05:02:05,705: WARNING: main]: Async invoke not available on graph; using sync invoke]
[2025-11-08 05:02:05,707: INFO: main]: Running validate_question node]
[2025-11-08 05:02:06,939: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:02:08,200: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:02:08,205: INFO: main]: Input validation passed.]
[2025-11-08 05:04:45,744: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:04:45,745: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 05:04:47,198: INFO: main]: Starting RAG query function]
[2025-11-08 05:04:47,201: INFO: main]: Running validate_question node]
[2025-11-08 05:04:48,621: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:04:49,519: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:04:49,521: INFO: main]: Input validation passed.]
[2025-11-08 05:04:49,522: INFO: main]: Retrieving documents for question: What is the fourier Series ?]
[2025-11-08 05:04:50,003: INFO: main]: KB relevance: True (found 5 docs)]
[2025-11-08 05:04:50,003: WARNING: main]: Async invoke not available on graph; using sync invoke]
[2025-11-08 05:04:50,004: INFO: main]: Running validate_question node]
[2025-11-08 05:04:51,343: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:04:52,019: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:04:52,021: INFO: main]: Input validation passed.]
[2025-11-08 05:04:52,021: INFO: main]: Retrieving documents for question: What is the fourier Series ?]
[2025-11-08 05:04:52,413: INFO: main]: KB relevance: True (found 10 docs)]
[2025-11-08 05:05:34,869: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:05:34,870: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 05:05:36,459: INFO: main]: Starting RAG query function]
[2025-11-08 05:05:36,462: INFO: main]: Running validate_question node]
[2025-11-08 05:05:37,706: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:05:39,235: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:05:39,237: INFO: main]: Input validation passed.]
[2025-11-08 05:05:39,239: INFO: main]: Retrieving documents for question: What is the fourier Series ?]
[2025-11-08 05:05:39,727: INFO: main]: KB relevance: True (found 5 docs)]
[2025-11-08 05:05:45,702: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:05:46,874: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:05:46,877: WARNING: main]: Output Guardrail Failed: The LLM refused to answer.]
[2025-11-08 05:06:25,629: INFO: main]: Starting RAG query function]
[2025-11-08 05:06:25,631: INFO: main]: Running validate_question node]
[2025-11-08 05:06:26,788: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 05:06:28,145: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 05:06:28,146: ERROR: main]: Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-08 05:20:31,997: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:20:31,998: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 05:42:01,002: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 05:42:01,004: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:15:33,248: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:15:33,250: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:16:35,015: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:16:35,016: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:17:38,676: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:17:38,677: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:17:56,048: INFO: main]: Starting RAG query function]
[2025-11-08 06:17:56,053: INFO: main]: Running validate_question node]
[2025-11-08 06:17:57,330: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:18:00,098: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:18:00,102: INFO: main]: Input validation passed.]
[2025-11-08 06:18:00,103: INFO: main]: Retrieving documents for question: What is a transformer]
[2025-11-08 06:18:00,622: INFO: main]: KB relevance: True (found 5 docs)]
[2025-11-08 06:18:04,523: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:18:05,004: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:18:05,005: INFO: main]: LLM generation complete and validated (len=558)]
[2025-11-08 06:19:17,966: INFO: main]: Starting RAG query function]
[2025-11-08 06:19:17,969: INFO: main]: Running validate_question node]
[2025-11-08 06:19:19,138: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:19:20,268: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:19:20,269: ERROR: main]: Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-08 06:20:31,439: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 06:20:31,439: INFO: main]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/transformers.txt]
[2025-11-08 06:20:31,439: INFO: data_ingestion]: data/pdfs/transformers.txt]
[2025-11-08 06:20:31,611: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 06:20:31,612: INFO: main]: Embedding 2 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/transformers.txt]
[2025-11-08 06:20:32,325: INFO: main]: Upserting to Qdrant: 2 vectors]
[2025-11-08 06:20:32,489: INFO: main]: Starting RAG ingest PDF function]
[2025-11-08 06:20:32,489: INFO: main]: Ingest completed: 2 chunks ingested]
[2025-11-08 06:20:49,552: INFO: main]: Starting RAG query function]
[2025-11-08 06:20:49,555: INFO: main]: Running validate_question node]
[2025-11-08 06:20:50,954: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:20:51,890: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:20:51,891: ERROR: main]: Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-08 06:22:11,016: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:22:11,016: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:23:26,921: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:23:26,922: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:23:52,957: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:23:52,957: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:24:04,244: INFO: test]: Received question for /ask: What is a Transformer ?]
[2025-11-08 06:24:04,246: INFO: test]: Running validate_question node]
[2025-11-08 06:24:05,385: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:24:09,275: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:24:09,277: ERROR: test]: Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-08 06:24:09,278: INFO: test]: Successfully processed /ask request (ID: eacf3012-3746-46c2-a121-4f5ba6200182)]
[2025-11-08 06:24:19,292: INFO: test]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 06:24:19,293: INFO: test]: Running validate_question node]
[2025-11-08 06:24:20,340: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:24:21,654: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:24:21,655: INFO: test]: Input validation passed.]
[2025-11-08 06:24:21,657: INFO: test]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 06:24:22,154: INFO: test]: KB relevance: True (found 5 docs)]
[2025-11-08 06:24:22,154: ERROR: test]: Error in /ask endpoint: 'GraphState' object has no attribute 'get']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 415, in http_ask_query
    final_state = await app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 711, in ainvoke
    input = await step.ainvoke(input, config)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/graph/_branch.py", line 189, in _aroute
    result = await self.path.ainvoke(value, config)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 464, in ainvoke
    ret = await asyncio.create_task(coro, context=context)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 266, in should_web_search
    is_kb_relevant = state.get("is_kb_relevant", False)
                     ^^^^^^^^^
AttributeError: 'GraphState' object has no attribute 'get'
During task with name 'retrieve' and id 'b4d9fe87-a5f0-acaf-0df8-981b1909c991'
[2025-11-08 06:24:51,887: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:24:51,887: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:24:58,172: INFO: test]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 06:24:58,174: INFO: test]: Running validate_question node]
[2025-11-08 06:24:59,405: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:25:00,279: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:25:00,281: INFO: test]: Input validation passed.]
[2025-11-08 06:25:00,282: INFO: test]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 06:25:00,756: INFO: test]: KB relevance: True (found 5 docs)]
[2025-11-08 06:25:03,488: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:25:04,477: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:25:04,478: INFO: test]: LLM generation complete and validated (len=57)]
[2025-11-08 06:25:04,479: INFO: test]: Successfully processed /ask request (ID: 6af72c70-5c5e-4ea8-878a-5e63d2db6df4)]
[2025-11-08 06:25:12,617: INFO: test]: Received positive feedback for interaction 6af72c70-5c5e-4ea8-878a-5e63d2db6df4]
[2025-11-08 06:25:12,617: INFO: test]:  Positive feedback logged (ID: 6af72c70-5c5e-4ea8-878a-5e63d2db6df4)]
[2025-11-08 06:27:52,426: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:27:52,426: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:28:25,117: INFO: test]: Starting RAG ingest PDF function]
[2025-11-08 06:28:25,117: INFO: test]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 06:28:25,117: INFO: data_ingestion]: data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 06:28:25,419: INFO: test]: Starting RAG ingest PDF function]
[2025-11-08 06:28:25,419: INFO: test]: Embedding 12 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 06:28:26,904: INFO: test]: Upserting to Qdrant: 12 vectors]
[2025-11-08 06:28:27,065: INFO: test]: Starting RAG ingest PDF function]
[2025-11-08 06:28:27,066: INFO: test]: Ingest completed: 12 chunks ingested]
[2025-11-08 06:28:40,196: INFO: test]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 06:28:40,198: INFO: test]: Running validate_question node]
[2025-11-08 06:28:41,358: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:28:42,288: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:28:42,290: INFO: test]: Input validation passed.]
[2025-11-08 06:28:42,291: INFO: test]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 06:28:42,999: INFO: test]: KB relevance: True (found 5 docs)]
[2025-11-08 06:28:51,550: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:28:52,218: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:28:52,219: INFO: test]: LLM generation complete and validated (len=709)]
[2025-11-08 06:28:52,220: INFO: test]: Successfully processed /ask request (ID: fdd2aa58-3b61-467c-9ce3-d5edd84c4116)]
[2025-11-08 06:29:35,264: INFO: test]: Received positive feedback for interaction fdd2aa58-3b61-467c-9ce3-d5edd84c4116]
[2025-11-08 06:29:35,265: INFO: test]:  Positive feedback logged (ID: fdd2aa58-3b61-467c-9ce3-d5edd84c4116)]
[2025-11-08 06:30:40,921: INFO: test]: Received question for /ask: We will find the Fourier series for the function $f(x)$ defined over the interval $(-\pi, \pi)$ with]
[2025-11-08 06:30:40,922: INFO: test]: Running validate_question node]
[2025-11-08 06:30:42,194: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:30:43,216: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:30:43,217: INFO: test]: Input validation passed.]
[2025-11-08 06:30:43,218: INFO: test]: Retrieving documents for question: We will find the Fourier series for the function $]
[2025-11-08 06:30:43,729: INFO: test]: KB relevance: True (found 10 docs)]
[2025-11-08 06:31:13,198: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:31:14,005: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:31:14,007: INFO: test]: LLM generation complete and validated (len=1279)]
[2025-11-08 06:31:14,007: INFO: test]: Successfully processed /ask request (ID: a099a84c-7f5c-4901-b10b-486c89e4a558)]
[2025-11-08 06:35:40,748: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 06:35:40,749: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 06:36:47,496: INFO: test]: Received question for /ask: find the Fourier series for the function $f(x)$ defined over the interval $(-\pi, \pi)$ with period ]
[2025-11-08 06:36:47,498: INFO: test]: Running validate_question node]
[2025-11-08 06:36:48,921: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:36:50,463: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:36:50,465: INFO: test]: Input validation passed.]
[2025-11-08 06:36:50,466: INFO: test]: Retrieving documents for question: find the Fourier series for the function $f(x)$ de]
[2025-11-08 06:36:51,049: INFO: test]: KB relevance: True (found 5 docs)]
[2025-11-08 06:37:19,103: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:37:20,013: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:37:20,015: INFO: test]: LLM generation complete and validated (len=725)]
[2025-11-08 06:37:20,016: INFO: test]: Successfully processed /ask request (ID: 657f1572-4818-4feb-b97b-1171f8b46c6b)]
[2025-11-08 06:37:33,849: INFO: test]: Received question for /ask: find the Fourier series for the function $f(x)$ defined over the interval $(-\pi, \pi)$ with period ]
[2025-11-08 06:37:33,850: INFO: test]: Running validate_question node]
[2025-11-08 06:37:37,099: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:37:38,369: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:37:38,372: INFO: test]: Input validation passed.]
[2025-11-08 06:37:38,375: INFO: test]: Retrieving documents for question: find the Fourier series for the function $f(x)$ de]
[2025-11-08 06:37:38,873: INFO: test]: KB relevance: True (found 10 docs)]
[2025-11-08 06:38:38,668: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:38:39,412: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:38:39,414: INFO: test]: LLM generation complete and validated (len=554)]
[2025-11-08 06:38:39,416: INFO: test]: Successfully processed /ask request (ID: 85aa5676-0967-4250-8a3b-764e63eb40d1)]
[2025-11-08 06:38:54,696: INFO: test]: Received question for /ask: find the Fourier series for the function $f(x)$ defined over the interval $(-\pi, \pi)$ with period ]
[2025-11-08 06:38:54,697: INFO: test]: Running validate_question node]
[2025-11-08 06:38:55,987: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:38:57,421: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:38:57,422: INFO: test]: Input validation passed.]
[2025-11-08 06:38:57,423: INFO: test]: Retrieving documents for question: find the Fourier series for the function $f(x)$ de]
[2025-11-08 06:38:57,916: INFO: test]: KB relevance: True (found 15 docs)]
[2025-11-08 06:39:22,580: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:39:23,876: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:39:23,877: INFO: test]: LLM generation complete and validated (len=1044)]
[2025-11-08 06:39:23,878: INFO: test]: Successfully processed /ask request (ID: 56f4113d-a409-4228-9c0b-190ab282411b)]
[2025-11-08 06:42:05,610: INFO: test]: Received question for /ask: find the Fourier series for the function $f(x)$ defined over the interval $(-\pi, \pi)$ with period ]
[2025-11-08 06:42:05,611: INFO: test]: Running validate_question node]
[2025-11-08 06:42:07,280: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:42:08,807: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:42:08,809: INFO: test]: Input validation passed.]
[2025-11-08 06:42:08,810: INFO: test]: Retrieving documents for question: find the Fourier series for the function $f(x)$ de]
[2025-11-08 06:42:09,491: INFO: test]: KB relevance: True (found 20 docs)]
[2025-11-08 06:42:29,784: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:42:30,995: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:42:30,996: INFO: test]: LLM generation complete and validated (len=481)]
[2025-11-08 06:42:30,997: INFO: test]: Successfully processed /ask request (ID: 2bd28335-cdaf-4411-9543-989be269f5a4)]
[2025-11-08 06:43:09,106: INFO: test]: Received question for /ask: Give me a step-by-step explaination of the problem]
[2025-11-08 06:43:09,107: INFO: test]: Running validate_question node]
[2025-11-08 06:43:10,287: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:43:11,661: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:43:11,663: INFO: test]: Input validation passed.]
[2025-11-08 06:43:11,664: INFO: test]: Retrieving documents for question: Give me a step-by-step explaination of the problem]
[2025-11-08 06:43:12,172: INFO: test]: KB relevance: True (found 25 docs)]
[2025-11-08 06:43:15,421: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 06:43:16,038: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 06:43:16,041: WARNING: test]: Output Guardrail Failed: The LLM refused to answer.]
[2025-11-08 06:43:16,043: INFO: test]: Successfully processed /ask request (ID: 8aae6bac-086e-416c-80de-267aef947318)]
[2025-11-08 13:10:58,060: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:10:58,061: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:12:55,336: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:12:55,337: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:13:41,650: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:13:41,651: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:14:03,373: INFO: data_ingestion]: Starting RAG ingest PDF function]
[2025-11-08 13:14:03,373: INFO: data_ingestion]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 13:14:03,374: INFO: data_ingestion]: data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 13:14:03,522: INFO: data_ingestion]: Starting RAG ingest PDF function]
[2025-11-08 13:14:03,522: INFO: data_ingestion]: Embedding 12 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-08 13:14:05,625: INFO: data_ingestion]: Upserting to Qdrant: 12 vectors]
[2025-11-08 13:14:05,771: INFO: data_ingestion]: Starting RAG ingest PDF function]
[2025-11-08 13:14:05,772: INFO: data_ingestion]: Ingest completed: 12 chunks ingested]
[2025-11-08 13:14:20,702: INFO: app]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 13:14:20,705: INFO: data_ingestion]: Running validate_question node]
[2025-11-08 13:14:22,217: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:14:22,217: INFO: guardrails]: Validator received text:
What is the Fourier Series ?...]
[2025-11-08 13:14:22,217: INFO: guardrails]: Validator is using topics:
['calculus', 'differential equations', 'probability', 'geometry', 'theorems', 'number theory', 'linear algebra', 'mathematics', 'statistics', 'equations', 'proofs', 'arithmetic', 'trigonometry', 'math', 'algebra']]
[2025-11-08 13:14:22,222: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:14:23,732: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:14:23,733: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-08 13:14:23,734: INFO: data_ingestion]: Input validation passed.]
[2025-11-08 13:14:23,735: INFO: data_ingestion]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 13:14:24,257: INFO: data_ingestion]: KB relevance: True (found 5 docs)]
[2025-11-08 13:14:29,193: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:14:29,193: INFO: guardrails]: Validator received text:
The Fourier series is a mathematical concept developed by Joseph Fourier that decomposes a complex, ...]
[2025-11-08 13:14:29,193: INFO: guardrails]: Validator is using topics:
["I don't know", "I don't have access to", "I don't have enough information", "I'm unable to assist", 'I am not programmed to', 'As an AI, I cannot help with that', 'I apologize, but I cannot', "I'm not able to", 'I cannot answer', "I'm sorry, I can't"]]
[2025-11-08 13:14:29,193: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:14:30,006: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:14:30,007: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:14:30,008: INFO: data_ingestion]: LLM generation complete and validated (len=681)]
[2025-11-08 13:14:30,009: INFO: app]: Successfully processed /ask request (ID: 46113cbf-f0f9-45c9-bf77-60e0d1475ff6)]
[2025-11-08 13:42:30,981: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:42:30,982: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:42:41,760: INFO: app]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 13:42:41,762: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:42:43,150: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:42:43,150: INFO: guardrails]: Validator received text:
What is the Fourier Series ?...]
[2025-11-08 13:42:43,150: INFO: guardrails]: Validator is using topics:
['differential equations', 'geometry', 'probability', 'math', 'mathematics', 'statistics', 'equations', 'theorems', 'arithmetic', 'proofs', 'trigonometry', 'algebra', 'calculus', 'linear algebra', 'number theory']]
[2025-11-08 13:42:43,156: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:42:44,532: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:42:44,533: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics']]
[2025-11-08 13:42:44,535: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:42:44,535: INFO: rag_pipeline]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 13:42:45,019: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-08 13:42:53,228: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:42:53,228: INFO: guardrails]: Validator received text:
The Fourier Series is a mathematical technique that expresses a periodic function as an infinite sum...]
[2025-11-08 13:42:53,228: INFO: guardrails]: Validator is using topics:
["I'm unable to assist", "I don't have access to", "I'm not able to", "I don't have enough information", 'I am not programmed to', "I'm sorry, I can't", 'As an AI, I cannot help with that', 'I cannot answer', 'I apologize, but I cannot', "I don't know"]]
[2025-11-08 13:42:53,228: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:42:54,347: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:42:54,347: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:42:54,348: INFO: rag_pipeline]: LLM generation complete and validated (len=473)]
[2025-11-08 13:42:54,349: INFO: app]: Successfully processed /ask request (ID: 407dd235-e77f-43d6-9e1e-fb7fc2a1e63d)]
[2025-11-08 13:43:25,755: INFO: app]: Received question for /ask: Is there a formula that I should know of ?]
[2025-11-08 13:43:25,756: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:43:26,977: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:43:26,977: INFO: guardrails]: Validator received text:
Is there a formula that I should know of ?...]
[2025-11-08 13:43:26,977: INFO: guardrails]: Validator is using topics:
['differential equations', 'geometry', 'probability', 'math', 'mathematics', 'statistics', 'equations', 'theorems', 'arithmetic', 'proofs', 'trigonometry', 'algebra', 'calculus', 'linear algebra', 'number theory']]
[2025-11-08 13:43:26,978: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:43:28,439: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:43:28,439: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics']]
[2025-11-08 13:43:28,441: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:43:28,441: INFO: rag_pipeline]: Retrieving documents for question: Is there a formula that I should know of ?]
[2025-11-08 13:43:28,935: INFO: rag_pipeline]: KB relevance: True (found 10 docs)]
[2025-11-08 13:43:37,755: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:43:37,755: INFO: guardrails]: Validator received text:
Yes, there are several key formulas in Fourier series that are essential to understand. Here are the...]
[2025-11-08 13:43:37,755: INFO: guardrails]: Validator is using topics:
["I'm unable to assist", "I don't have access to", "I'm not able to", "I don't have enough information", 'I am not programmed to', "I'm sorry, I can't", 'As an AI, I cannot help with that', 'I cannot answer', 'I apologize, but I cannot', "I don't know"]]
[2025-11-08 13:43:37,755: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:43:38,692: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:43:38,693: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:43:38,693: INFO: rag_pipeline]: LLM generation complete and validated (len=850)]
[2025-11-08 13:43:38,694: INFO: app]: Successfully processed /ask request (ID: 7616225d-9ccd-416b-a7ab-fe77482ffc24)]
[2025-11-08 13:48:21,107: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:48:21,107: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:48:22,716: INFO: app]: Received question for /ask: What is the Fourier Series ?]
[2025-11-08 13:48:22,718: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:48:24,142: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:48:24,142: INFO: guardrails]: Validator received text:
What is the Fourier Series ?...]
[2025-11-08 13:48:24,142: INFO: guardrails]: Validator is using topics:
['trigonometry', 'arithmetic', 'proofs', 'equations', 'statistics', 'linear algebra', 'calculus', 'probability', 'mathematics', 'number theory', 'differential equations', 'theorems', 'math', 'algebra', 'geometry']]
[2025-11-08 13:48:24,147: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:48:25,549: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:48:25,550: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-08 13:48:25,552: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:48:25,552: INFO: rag_pipeline]: Retrieving documents for question: What is the Fourier Series ?]
[2025-11-08 13:48:26,015: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-08 13:48:30,251: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:48:30,251: INFO: guardrails]: Validator received text:
The Fourier Series is a mathematical tool named after Joseph Fourier, which represents a complex, pe...]
[2025-11-08 13:48:30,251: INFO: guardrails]: Validator is using topics:
["I don't have access to", "I'm sorry, I can't", 'I cannot answer', "I'm unable to assist", 'As an AI, I cannot help with that', 'I am not programmed to', "I don't have enough information", "I'm not able to", "I don't know", 'I apologize, but I cannot']]
[2025-11-08 13:48:30,251: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:48:31,056: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:48:31,057: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:48:31,058: INFO: rag_pipeline]: LLM generation complete and validated (len=740)]
[2025-11-08 13:48:31,058: INFO: app]: Successfully processed /ask request (ID: 1277d263-0920-4598-8aa6-a3a065476a17)]
[2025-11-08 13:48:33,831: INFO: app]: Received positive feedback for interaction 1277d263-0920-4598-8aa6-a3a065476a17]
[2025-11-08 13:48:33,831: ERROR: app]: Unexpected error while processing feedback: 'RAGPipeline' object has no attribute 'FEEDBACK_FILE']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/app.py", line 148, in http_receive_feedback
    feedback_path = Path(rag_pipeline.FEEDBACK_FILE)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'RAGPipeline' object has no attribute 'FEEDBACK_FILE'
[2025-11-08 13:49:13,686: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:49:13,686: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:49:14,799: INFO: app]: Received positive feedback for interaction 1277d263-0920-4598-8aa6-a3a065476a17]
[2025-11-08 13:49:14,800: INFO: app]:  Positive feedback logged (ID: 1277d263-0920-4598-8aa6-a3a065476a17)]
[2025-11-08 13:49:41,526: INFO: app]: Received question for /ask: Is there a formula for Fourier Series ?]
[2025-11-08 13:49:41,528: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:49:43,224: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:49:43,224: INFO: guardrails]: Validator received text:
Is there a formula for Fourier Series ?...]
[2025-11-08 13:49:43,225: INFO: guardrails]: Validator is using topics:
['statistics', 'proofs', 'number theory', 'linear algebra', 'arithmetic', 'geometry', 'calculus', 'trigonometry', 'theorems', 'equations', 'algebra', 'mathematics', 'math', 'probability', 'differential equations']]
[2025-11-08 13:49:43,229: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:49:44,314: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:49:44,315: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:49:44,316: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:49:44,317: INFO: rag_pipeline]: Retrieving documents for question: Is there a formula for Fourier Series ?]
[2025-11-08 13:49:44,815: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-08 13:49:50,454: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:49:50,454: INFO: guardrails]: Validator received text:
Yes, the Fourier Series has formulas. The context provides two forms:  
1. **Trigonometric form** (f...]
[2025-11-08 13:49:50,454: INFO: guardrails]: Validator is using topics:
['I am not programmed to', "I'm sorry, I can't", "I don't have access to", 'As an AI, I cannot help with that', "I don't know", 'I cannot answer', "I'm unable to assist", 'I apologize, but I cannot', "I don't have enough information", "I'm not able to"]]
[2025-11-08 13:49:50,455: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:49:51,808: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:49:51,808: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:49:51,809: INFO: rag_pipeline]: LLM generation complete and validated (len=623)]
[2025-11-08 13:49:51,810: INFO: app]: Successfully processed /ask request (ID: 89ca0aa6-a65a-49d9-8119-a38b4b91588d)]
[2025-11-08 13:49:55,243: INFO: app]: Received positive feedback for interaction 89ca0aa6-a65a-49d9-8119-a38b4b91588d]
[2025-11-08 13:49:55,244: INFO: app]:  Positive feedback logged (ID: 89ca0aa6-a65a-49d9-8119-a38b4b91588d)]
[2025-11-08 13:50:15,713: INFO: app]: Received question for /ask: How to make a bomb ?]
[2025-11-08 13:50:15,714: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:50:16,903: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:50:16,903: INFO: guardrails]: Validator received text:
How to make a bomb ?...]
[2025-11-08 13:50:16,903: INFO: guardrails]: Validator is using topics:
['statistics', 'proofs', 'number theory', 'linear algebra', 'arithmetic', 'geometry', 'calculus', 'trigonometry', 'theorems', 'equations', 'algebra', 'mathematics', 'math', 'probability', 'differential equations']]
[2025-11-08 13:50:16,903: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:50:17,951: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:50:17,951: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:50:17,952: ERROR: rag_pipeline]: Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-08 13:50:17,954: INFO: app]: Successfully processed /ask request (ID: 771ec11f-961d-448e-a419-97f033068704)]
[2025-11-08 13:50:24,754: INFO: app]: Received positive feedback for interaction 771ec11f-961d-448e-a419-97f033068704]
[2025-11-08 13:50:24,755: INFO: app]:  Positive feedback logged (ID: 771ec11f-961d-448e-a419-97f033068704)]
[2025-11-08 13:50:42,986: INFO: app]: Received question for /ask: How many eggs to put in cake ?]
[2025-11-08 13:50:42,987: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:50:44,026: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:50:44,026: INFO: guardrails]: Validator received text:
How many eggs to put in cake ?...]
[2025-11-08 13:50:44,026: INFO: guardrails]: Validator is using topics:
['statistics', 'proofs', 'number theory', 'linear algebra', 'arithmetic', 'geometry', 'calculus', 'trigonometry', 'theorems', 'equations', 'algebra', 'mathematics', 'math', 'probability', 'differential equations']]
[2025-11-08 13:50:44,027: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:50:45,256: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:50:45,256: INFO: guardrails]: Validator is returning this list: []]
[2025-11-08 13:50:45,257: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:50:45,258: INFO: rag_pipeline]: Retrieving documents for question: How many eggs to put in cake ?]
[2025-11-08 13:50:45,758: INFO: rag_pipeline]: KB relevance: True (found 10 docs)]
[2025-11-08 13:50:49,556: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:50:49,556: INFO: guardrails]: Validator received text:
I don't have enough information to answer this question. The provided context is about Fourier serie...]
[2025-11-08 13:50:49,556: INFO: guardrails]: Validator is using topics:
['I am not programmed to', "I'm sorry, I can't", "I don't have access to", 'As an AI, I cannot help with that', "I don't know", 'I cannot answer', "I'm unable to assist", 'I apologize, but I cannot', "I don't have enough information", "I'm not able to"]]
[2025-11-08 13:50:49,556: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:50:50,756: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:50:50,756: INFO: guardrails]: Validator is returning this list: ["I don't have enough information"]]
[2025-11-08 13:50:50,757: WARNING: rag_pipeline]: Output Guardrail Failed: The LLM refused to answer.]
[2025-11-08 13:50:50,758: INFO: app]: Successfully processed /ask request (ID: cd08ba1c-6a01-481e-8cbf-c078c971dc60)]
[2025-11-08 13:52:03,613: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-08 13:52:03,613: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-08 13:52:12,115: INFO: app]: Received question for /ask: Is there a formula for Fourier Series ?]
[2025-11-08 13:52:12,117: INFO: rag_pipeline]: Running validate_question node]
[2025-11-08 13:52:13,247: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-08 13:52:13,247: INFO: guardrails]: Validator received text:
Is there a formula for Fourier Series ?...]
[2025-11-08 13:52:13,247: INFO: guardrails]: Validator is using topics:
['differential equations', 'trigonometry', 'probability', 'math', 'mathematics', 'algebra', 'statistics', 'theorems', 'geometry', 'proofs', 'arithmetic', 'number theory', 'linear algebra', 'equations', 'calculus']]
[2025-11-08 13:52:13,252: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-08 13:52:15,016: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-08 13:52:15,017: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics']]
[2025-11-08 13:52:15,018: INFO: rag_pipeline]: Input validation passed.]
[2025-11-08 13:52:15,019: INFO: rag_pipeline]: Retrieving documents for question: Is there a formula for Fourier Series ?]
[2025-11-08 13:52:15,221: ERROR: app]: Error in /ask endpoint: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/app.py", line 76, in http_ask_query
    result = await rag_pipeline.query(question)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 489, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 333, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}
During task with name 'retrieve' and id 'b0b5505f-c64c-aeb1-4665-dfdada96295c'
[2025-11-09 13:54:44,954: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 13:54:44,962: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 13:57:35,821: INFO: telemetry]: Anonymized telemetry enabled. Set MCP_USE_ANONYMIZED_TELEMETRY=false to disable.]
[2025-11-09 13:58:51,772: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 13:58:51,773: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 13:58:51,903: INFO: telemetry]: Anonymized telemetry enabled. Set MCP_USE_ANONYMIZED_TELEMETRY=false to disable.]
[2025-11-09 13:58:52,325: INFO: mcpagent]:  Initializing MCP agent and connecting to services...]
[2025-11-09 13:58:52,325: INFO: mcpagent]:  Found 0 existing sessions]
[2025-11-09 13:58:52,325: INFO: mcpagent]:  No active sessions found, creating new ones...]
[2025-11-09 13:58:59,648: INFO: mcpagent]:  Created 1 new sessions]
[2025-11-09 13:59:08,939: INFO: mcpagent]:  Created 14 LangChain tools from client]
[2025-11-09 13:59:08,939: INFO: mcpagent]:  Found 14 tools across all connectors]
[2025-11-09 13:59:08,939: INFO: mcpagent]:  Agent ready with tools: read_file, read_text_file, read_media_file, read_multiple_files, write_file, edit_file, create_directory, list_directory, list_directory_with_sizes, directory_tree, move_file, search_files, get_file_info, list_allowed_directories]
[2025-11-09 13:59:08,944: INFO: mcpagent]:  Agent initialization complete]
[2025-11-09 13:59:08,944: INFO: mcpagent]:  Received query: 'List all files in the directory']
[2025-11-09 13:59:08,944: INFO: mcpagent]:  Starting agent execution]
[2025-11-09 13:59:10,358: INFO: _client]: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"]
[2025-11-09 13:59:14,315: INFO: mcpagent]:  Agent finished with output]
[2025-11-09 13:59:14,339: INFO: mcpagent]:  Agent execution complete in 22.01 seconds]
[2025-11-09 13:59:51,984: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 13:59:51,985: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 13:59:52,103: INFO: telemetry]: Anonymized telemetry enabled. Set MCP_USE_ANONYMIZED_TELEMETRY=false to disable.]
[2025-11-09 13:59:52,415: INFO: mcpagent]:  Initializing MCP agent and connecting to services...]
[2025-11-09 13:59:52,415: INFO: mcpagent]:  Found 0 existing sessions]
[2025-11-09 13:59:52,415: INFO: mcpagent]:  No active sessions found, creating new ones...]
[2025-11-09 13:59:53,085: INFO: mcpagent]:  Created 1 new sessions]
[2025-11-09 14:00:11,766: INFO: mcpagent]:  Created 6 LangChain tools from client]
[2025-11-09 14:00:11,766: INFO: mcpagent]:  Found 6 tools across all connectors]
[2025-11-09 14:00:11,766: INFO: mcpagent]:  Agent ready with tools: firecrawl_scrape, firecrawl_map, firecrawl_search, firecrawl_crawl, firecrawl_check_crawl_status, firecrawl_extract]
[2025-11-09 14:00:11,771: INFO: mcpagent]:  Agent initialization complete]
[2025-11-09 14:00:11,771: INFO: mcpagent]:  Received query: 'What is a transformer?']
[2025-11-09 14:00:11,771: INFO: mcpagent]:  Starting agent execution]
[2025-11-09 14:00:13,122: INFO: _client]: HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 200 OK"]
[2025-11-09 14:00:30,610: INFO: mcpagent]:  Agent finished with output]
[2025-11-09 14:00:30,611: INFO: mcpagent]:  Agent execution complete in 38.20 seconds]
[2025-11-09 14:04:54,895: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:04:54,896: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:20:39,754: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:20:39,756: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:22:09,937: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:22:09,938: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:23:04,552: INFO: main]: Starting RAG ingest PDF function]
[2025-11-09 14:23:04,553: INFO: main]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:23:04,553: INFO: data_ingestion]: data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:23:05,000: INFO: main]: Starting RAG ingest PDF function]
[2025-11-09 14:23:05,001: INFO: main]: Embedding 12 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:23:06,953: INFO: main]: Upserting to Qdrant: 12 vectors]
[2025-11-09 14:23:07,107: INFO: main]: Starting RAG ingest PDF function]
[2025-11-09 14:23:07,108: INFO: main]: Ingest completed: 12 chunks ingested]
[2025-11-09 14:26:21,068: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:26:21,069: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:26:21,150: WARNING: rag_pipeline]: MCP configuration error: FIRECRAWL_API_KEY not found in environment variables. Please set it in your .env file.. Web search disabled.]
[2025-11-09 14:27:09,202: INFO: rag_pipeline]: Starting RAG ingest PDF function]
[2025-11-09 14:27:09,202: INFO: rag_pipeline]: Loading and chunking PDF: /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:27:09,203: INFO: data_ingestion]: data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:27:09,351: INFO: rag_pipeline]: Starting RAG ingest PDF function]
[2025-11-09 14:27:09,351: INFO: rag_pipeline]: Embedding 12 chunks for source /home/ryefoxlime/MathTutor/data/pdfs/An Overview of Fourier Series.pdf]
[2025-11-09 14:27:11,312: INFO: rag_pipeline]: Upserting to Qdrant: 12 vectors]
[2025-11-09 14:27:11,452: INFO: rag_pipeline]: Starting RAG ingest PDF function]
[2025-11-09 14:27:11,453: INFO: rag_pipeline]: Ingest completed: 12 chunks ingested]
[2025-11-09 14:27:31,550: INFO: rag_pipeline]: Starting RAG query function via Inngest]
[2025-11-09 14:27:31,554: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:27:32,918: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:27:32,918: INFO: guardrails]: Validator received text:
What is the laplace series?...]
[2025-11-09 14:27:32,918: INFO: guardrails]: Validator is using topics:
['probability', 'geometry', 'proofs', 'mathematics', 'theorems', 'differential equations', 'statistics', 'arithmetic', 'math', 'trigonometry', 'equations', 'linear algebra', 'algebra', 'calculus', 'number theory']]
[2025-11-09 14:27:32,924: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:27:34,543: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:27:34,544: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 14:27:34,545: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:27:34,546: INFO: rag_pipeline]: Retrieving documents for question: What is the laplace series?]
[2025-11-09 14:27:35,092: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-09 14:27:38,631: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:27:38,631: INFO: guardrails]: Validator received text:
I don't have enough information to answer this question. The context provided only discusses Fourier...]
[2025-11-09 14:27:38,631: INFO: guardrails]: Validator is using topics:
["I'm unable to assist", 'I am not programmed to', "I'm not able to", "I don't have enough information", 'I apologize, but I cannot', 'I cannot answer', "I'm sorry, I can't", "I don't have access to", 'As an AI, I cannot help with that', "I don't know"]]
[2025-11-09 14:27:38,632: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:27:39,939: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:27:39,939: INFO: guardrails]: Validator is returning this list: ["I'm unable to assist", "I don't have enough information"]]
[2025-11-09 14:27:39,941: WARNING: rag_pipeline]: Output Guardrail Failed: The LLM refused to answer.]
[2025-11-09 14:28:56,431: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:28:56,431: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:28:56,517: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:29:39,118: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:29:39,118: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: object _AsyncGeneratorContextManager can't be used in 'await' expression]
[2025-11-09 14:29:40,120: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:29:40,120: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: object _AsyncGeneratorContextManager can't be used in 'await' expression]
[2025-11-09 14:29:41,121: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:29:41,121: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: object _AsyncGeneratorContextManager can't be used in 'await' expression]
[2025-11-09 14:29:42,124: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:29:42,124: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: object _AsyncGeneratorContextManager can't be used in 'await' expression]
[2025-11-09 14:29:48,282: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:29:48,283: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:29:48,363: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:29:48,396: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:29:49,644: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:29:49,645: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:29:49,645: INFO: guardrails]: Validator is using topics:
['mathematics', 'number theory', 'differential equations', 'calculus', 'math', 'algebra', 'linear algebra', 'geometry', 'theorems', 'equations', 'trigonometry', 'proofs', 'probability', 'statistics', 'arithmetic']]
[2025-11-09 14:29:49,650: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:29:51,175: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:29:51,176: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 14:29:51,178: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:29:51,179: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:29:51,733: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-09 14:30:00,024: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:30:00,024: INFO: guardrails]: Validator received text:
I don't have enough information to answer this question.
...]
[2025-11-09 14:30:00,024: INFO: guardrails]: Validator is using topics:
["I'm not able to", 'I am not programmed to', "I'm sorry, I can't", "I'm unable to assist", "I don't have access to", 'I apologize, but I cannot', 'As an AI, I cannot help with that', "I don't have enough information", 'I cannot answer', "I don't know"]]
[2025-11-09 14:30:00,025: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:30:01,121: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:30:01,122: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 14:30:01,122: INFO: rag_pipeline]: LLM generation complete and validated (len=57)]
[2025-11-09 14:36:10,402: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:36:10,403: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:36:10,491: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:36:56,933: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:36:56,934: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:36:57,013: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:37:05,406: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:37:05,406: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:37:05,489: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:37:17,991: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:37:17,992: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:37:18,071: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:37:28,652: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:37:29,036: INFO: mcp_client]: Connected to Firecrawl MCP. Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 14:37:29,115: INFO: mcp_client]: Disconnected from Firecrawl MCP server]
[2025-11-09 14:37:30,116: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:37:30,428: INFO: mcp_client]: Connected to Firecrawl MCP. Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 14:37:30,429: INFO: mcp_client]: Searching web with Firecrawl: Pythagorean theorem explanation]
[2025-11-09 14:38:30,458: WARNING: mcp_client]: Could not parse search results as JSON]
[2025-11-09 14:38:30,469: INFO: mcp_client]: Disconnected from Firecrawl MCP server]
[2025-11-09 14:38:31,471: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:38:31,782: INFO: mcp_client]: Connected to Firecrawl MCP. Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 14:38:31,783: INFO: mcp_client]: Scraping URL: https://en.wikipedia.org/wiki/Pythagorean_theorem]
[2025-11-09 14:38:47,675: INFO: mcp_client]: Successfully scraped https://en.wikipedia.org/wiki/Pythagorean_theorem]
[2025-11-09 14:38:47,687: INFO: mcp_client]: Disconnected from Firecrawl MCP server]
[2025-11-09 14:38:48,688: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:38:48,989: INFO: mcp_client]: Connected to Firecrawl MCP. Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 14:38:48,989: INFO: mcp_client]: Searching web with Firecrawl: quadratic formula derivation]
[2025-11-09 14:39:49,060: WARNING: mcp_client]: Could not parse search results as JSON]
[2025-11-09 14:39:49,060: WARNING: mcp_client]: No search results found]
[2025-11-09 14:39:49,070: INFO: mcp_client]: Disconnected from Firecrawl MCP server]
[2025-11-09 14:39:55,654: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:39:55,655: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:39:55,744: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:39:55,782: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:39:57,035: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:39:57,036: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:39:57,036: INFO: guardrails]: Validator is using topics:
['probability', 'math', 'arithmetic', 'mathematics', 'calculus', 'geometry', 'trigonometry', 'equations', 'linear algebra', 'algebra', 'number theory', 'theorems', 'statistics', 'proofs', 'differential equations']]
[2025-11-09 14:39:57,041: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:39:58,192: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:39:58,193: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics']]
[2025-11-09 14:39:58,195: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:39:58,196: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:39:58,768: INFO: rag_pipeline]: KB relevance: True (found 5 docs)]
[2025-11-09 14:40:06,073: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:40:06,073: INFO: guardrails]: Validator received text:
I don't have enough information to answer this question.
...]
[2025-11-09 14:40:06,073: INFO: guardrails]: Validator is using topics:
['I apologize, but I cannot', "I'm unable to assist", 'I cannot answer', "I don't have access to", "I don't have enough information", 'I am not programmed to', "I don't know", "I'm sorry, I can't", "I'm not able to", 'As an AI, I cannot help with that']]
[2025-11-09 14:40:06,074: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:40:07,602: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:40:07,603: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 14:40:07,604: INFO: rag_pipeline]: LLM generation complete and validated (len=57)]
[2025-11-09 14:43:38,043: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:43:38,044: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:43:38,129: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:44:35,785: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:44:35,786: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:44:35,865: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:46:24,087: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:46:24,087: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:46:24,172: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:46:47,920: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:46:47,921: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:46:48,010: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:46:53,725: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:46:53,726: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:46:53,805: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:46:53,840: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:46:54,391: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:46:54,391: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:46:54,472: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:46:55,102: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:46:55,102: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:46:55,102: INFO: guardrails]: Validator is using topics:
['algebra', 'differential equations', 'math', 'equations', 'proofs', 'geometry', 'arithmetic', 'calculus', 'linear algebra', 'number theory', 'trigonometry', 'probability', 'statistics', 'theorems', 'mathematics']]
[2025-11-09 14:46:55,107: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:46:56,804: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:46:56,806: INFO: guardrails]: Validator is returning this list: ['math', 'number theory']]
[2025-11-09 14:46:56,807: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:46:56,808: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:46:57,349: ERROR: rag_pipeline]: Graph ainvoke failed: Unknown arguments: ['with_scores']]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 564, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 309, in retrieve
    found = self.qdrant_storage.search(query_vec, 5)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_storing.py", line 28, in search
    results = self.client.search(
              ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/qdrant_client/qdrant_client.py", line 369, in search
    assert len(kwargs) == 0, f"Unknown arguments: {list(kwargs.keys())}"
           ^^^^^^^^^^^^^^^^
AssertionError: Unknown arguments: ['with_scores']
During task with name 'retrieve' and id 'c246ba45-e809-7565-54da-095a4b5cd110'
[2025-11-09 14:50:23,297: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:50:23,298: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:50:23,378: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:50:53,887: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:50:53,888: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:50:53,972: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:52:13,228: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:52:13,229: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:52:13,311: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:52:45,293: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:52:45,293: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:52:45,373: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:52:45,408: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:52:46,992: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:52:46,992: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:52:46,992: INFO: guardrails]: Validator is using topics:
['arithmetic', 'equations', 'probability', 'linear algebra', 'differential equations', 'proofs', 'geometry', 'algebra', 'number theory', 'statistics', 'trigonometry', 'calculus', 'math', 'mathematics', 'theorems']]
[2025-11-09 14:52:46,997: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:52:48,004: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:52:48,005: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics', 'number theory']]
[2025-11-09 14:52:48,006: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:52:48,008: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:52:48,567: INFO: data_storing]: Searching Qdrant with score_threshold: 0.7]
[2025-11-09 14:52:48,572: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 14:52:48,573: INFO: rag_pipeline]: Running web_search node with Firecrawl MCP]
[2025-11-09 14:52:48,573: INFO: rag_pipeline]: Searching web for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 14:52:48,573: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:52:48,575: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: ]
[2025-11-09 14:52:48,575: ERROR: rag_pipeline]: Web search failed: generator didn't stop after athrow()]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 64, in connect
    self.read, self.write = await self.stdio_cm.__aenter__()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 124, in stdio_client
    process = await _create_platform_compatible_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 251, in _create_platform_compatible_process
    process = await anyio.open_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_core/_subprocesses.py", line 190, in open_process
    return await get_async_backend().open_process(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2588, in open_process
    process = await asyncio.create_subprocess_exec(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/subprocess.py", line 224, in create_subprocess_exec
    transport, protocol = await loop.subprocess_exec(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1744, in subprocess_exec
    transport = await self._make_subprocess_transport(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 200, in _make_subprocess_transport
    watcher = events.get_child_watcher()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 828, in get_child_watcher
    return get_event_loop_policy().get_child_watcher()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 645, in get_child_watcher
    raise NotImplementedError
NotImplementedError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 391, in web_search
    extracted_contents = await self.mcp_client.search_and_extract(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 302, in search_and_extract
    search_results = await self.search_web(query, max_results)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 134, in search_web
    await self.connect()
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 88, in connect
    await self.stdio_cm.__aexit__(type(e), e, e.__traceback__)
  File "/usr/lib/python3.12/contextlib.py", line 267, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
[2025-11-09 14:55:22,792: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:55:22,793: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:55:22,875: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:55:24,690: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:55:24,690: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:55:24,771: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:55:24,807: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:55:26,377: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:55:26,377: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:55:26,377: INFO: guardrails]: Validator is using topics:
['arithmetic', 'linear algebra', 'calculus', 'number theory', 'equations', 'math', 'probability', 'trigonometry', 'algebra', 'proofs', 'mathematics', 'geometry', 'statistics', 'differential equations', 'theorems']]
[2025-11-09 14:55:26,383: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:55:27,462: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:55:27,462: INFO: guardrails]: Validator is returning this list: ['number theory', 'math']]
[2025-11-09 14:55:27,464: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:55:27,465: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:55:27,989: INFO: data_storing]: Searching Qdrant with score_threshold: 0.7]
[2025-11-09 14:55:27,995: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 14:55:27,996: INFO: rag_pipeline]: Running web_search node with Firecrawl MCP]
[2025-11-09 14:55:27,997: INFO: rag_pipeline]: Searching web for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 14:55:27,997: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:55:27,999: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: ]
[2025-11-09 14:55:27,999: ERROR: rag_pipeline]: Web search failed: generator didn't stop after athrow()]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 64, in connect
    self.read, self.write = await self.stdio_cm.__aenter__()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 124, in stdio_client
    process = await _create_platform_compatible_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 251, in _create_platform_compatible_process
    process = await anyio.open_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_core/_subprocesses.py", line 190, in open_process
    return await get_async_backend().open_process(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2588, in open_process
    process = await asyncio.create_subprocess_exec(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/subprocess.py", line 224, in create_subprocess_exec
    transport, protocol = await loop.subprocess_exec(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1744, in subprocess_exec
    transport = await self._make_subprocess_transport(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 200, in _make_subprocess_transport
    watcher = events.get_child_watcher()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 828, in get_child_watcher
    return get_event_loop_policy().get_child_watcher()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 645, in get_child_watcher
    raise NotImplementedError
NotImplementedError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 391, in web_search
    extracted_contents = await self.mcp_client.search_and_extract(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 302, in search_and_extract
    search_results = await self.search_web(query, max_results)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 134, in search_web
    await self.connect()
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 88, in connect
    await self.stdio_cm.__aexit__(type(e), e, e.__traceback__)
  File "/usr/lib/python3.12/contextlib.py", line 267, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
[2025-11-09 14:58:27,967: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:58:27,968: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:58:28,055: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:59:03,100: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 14:59:03,101: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 14:59:03,180: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 14:59:03,215: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 14:59:04,416: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 14:59:04,416: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 14:59:04,416: INFO: guardrails]: Validator is using topics:
['algebra', 'calculus', 'differential equations', 'arithmetic', 'trigonometry', 'mathematics', 'math', 'statistics', 'proofs', 'probability', 'equations', 'number theory', 'linear algebra', 'theorems', 'geometry']]
[2025-11-09 14:59:04,421: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 14:59:05,927: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 14:59:05,928: INFO: guardrails]: Validator is returning this list: ['mathematics', 'math', 'number theory']]
[2025-11-09 14:59:05,929: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 14:59:05,931: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 14:59:06,502: INFO: data_storing]: Searching Qdrant with score_threshold: 0.7]
[2025-11-09 14:59:06,508: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 14:59:06,509: INFO: rag_pipeline]: Running web_search node with Firecrawl MCP]
[2025-11-09 14:59:06,509: INFO: rag_pipeline]: Searching web for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 14:59:06,509: INFO: mcp_client]: Connecting to Firecrawl MCP server...]
[2025-11-09 14:59:06,511: ERROR: mcp_client]: Failed to connect to Firecrawl MCP server: ]
[2025-11-09 14:59:06,511: ERROR: rag_pipeline]: Web search failed: generator didn't stop after athrow()]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 64, in connect
    self.read, self.write = await self.stdio_cm.__aenter__()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 124, in stdio_client
    process = await _create_platform_compatible_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 251, in _create_platform_compatible_process
    process = await anyio.open_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_core/_subprocesses.py", line 190, in open_process
    return await get_async_backend().open_process(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2588, in open_process
    process = await asyncio.create_subprocess_exec(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/subprocess.py", line 224, in create_subprocess_exec
    transport, protocol = await loop.subprocess_exec(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1744, in subprocess_exec
    transport = await self._make_subprocess_transport(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 200, in _make_subprocess_transport
    watcher = events.get_child_watcher()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 828, in get_child_watcher
    return get_event_loop_policy().get_child_watcher()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 645, in get_child_watcher
    raise NotImplementedError
NotImplementedError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 391, in web_search
    extracted_contents = await self.mcp_client.search_and_extract(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 302, in search_and_extract
    search_results = await self.search_web(query, max_results)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 134, in search_web
    await self.connect()
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 88, in connect
    await self.stdio_cm.__aexit__(type(e), e, e.__traceback__)
  File "/usr/lib/python3.12/contextlib.py", line 267, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
[2025-11-09 15:04:31,601: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:04:31,601: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:04:31,681: ERROR: mcp_config]: SERPER_API_KEY not found in environment variables. Please set it in your .env file.]
[2025-11-09 15:04:31,681: WARNING: rag_pipeline]: MCP configuration error: SERPER_API_KEY not found.. Web search disabled.]
[2025-11-09 15:12:32,436: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:12:32,437: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:12:32,518: ERROR: mcp_config]: SERPER_API_KEY not found in environment variables. Please set it in your .env file.]
[2025-11-09 15:12:32,519: WARNING: rag_pipeline]: MCP configuration error: SERPER_API_KEY not found.. Web search disabled.]
[2025-11-09 15:12:39,212: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:12:39,212: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:12:39,295: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:12:39,295: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:12:45,661: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:12:45,662: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:12:45,745: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:12:45,745: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:12:51,884: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:12:51,885: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:12:51,962: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:12:51,962: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:13:29,703: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:13:29,703: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:13:29,788: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:13:29,788: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:14:55,433: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:14:55,433: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:14:55,444: ERROR: mcp_client]: Failed to connect to custom MCP server: Connection closed]
[2025-11-09 15:14:55,445: ERROR: base_events]: Task exception was never retrieved
future: <Task finished name='Task-6' coro=<<async_generator_athrow without __name__>()> exception=RuntimeError('Attempted to exit cancel scope in a different task than it was entered in')>]
  + Exception Group Traceback (most recent call last):
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 787, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 459, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
[2025-11-09 15:14:56,101: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:14:56,101: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:14:56,184: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:14:56,184: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:15:47,527: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:15:47,528: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:15:47,608: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:15:47,608: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:15:48,822: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:15:48,822: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:15:50,099: ERROR: mcp_client]: Failed to connect to custom MCP server: Connection closed]
[2025-11-09 15:15:50,099: ERROR: base_events]: Task exception was never retrieved
future: <Task finished name='Task-6' coro=<<async_generator_athrow without __name__>()> exception=RuntimeError('Attempted to exit cancel scope in a different task than it was entered in')>]
  + Exception Group Traceback (most recent call last):
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | BaseExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    | GeneratorExit
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 182, in stdio_client
    async with (
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 787, in __aexit__
    if self.cancel_scope.__exit__(type(exc), exc, exc.__traceback__):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 459, in __exit__
    raise RuntimeError(
RuntimeError: Attempted to exit cancel scope in a different task than it was entered in
[2025-11-09 15:15:53,994: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:15:53,994: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:15:54,074: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:15:54,074: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:16:21,165: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:16:21,165: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:16:22,236: INFO: mcp_client]: Connected to custom MCP. Available tools: ['firecrawl_search', 'firecrawl_scrape']]
[2025-11-09 15:16:22,422: INFO: mcp_client]: Disconnected from custom MCP server]
[2025-11-09 15:16:22,727: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:16:22,727: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:16:22,810: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:16:22,810: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:16:28,585: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:16:28,586: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:16:28,665: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:16:28,665: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:16:28,700: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 15:16:29,935: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 15:16:29,935: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 15:16:29,935: INFO: guardrails]: Validator is using topics:
['geometry', 'math', 'statistics', 'equations', 'arithmetic', 'differential equations', 'linear algebra', 'number theory', 'probability', 'mathematics', 'theorems', 'proofs', 'calculus', 'algebra', 'trigonometry']]
[2025-11-09 15:16:29,940: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 15:16:31,038: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 15:16:31,039: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 15:16:31,040: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 15:16:31,041: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 15:16:31,569: INFO: data_storing]: Searching Qdrant with score_threshold: 0.7]
[2025-11-09 15:16:31,576: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 15:16:31,576: INFO: rag_pipeline]: Running web_search node with Firecrawl MCP]
[2025-11-09 15:16:31,576: INFO: rag_pipeline]: Searching web for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 15:16:31,576: INFO: mcp_client]: Running search_and_extract for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 15:16:31,576: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:16:31,577: ERROR: mcp_client]: Failed to connect to custom MCP server: ]
[2025-11-09 15:16:31,577: ERROR: rag_pipeline]: Web search failed: generator didn't stop after athrow()]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 57, in connect
    self.read, self.write = await self.stdio_cm.__aenter__()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 124, in stdio_client
    process = await _create_platform_compatible_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 251, in _create_platform_compatible_process
    process = await anyio.open_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_core/_subprocesses.py", line 190, in open_process
    return await get_async_backend().open_process(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2588, in open_process
    process = await asyncio.create_subprocess_exec(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/subprocess.py", line 224, in create_subprocess_exec
    transport, protocol = await loop.subprocess_exec(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1744, in subprocess_exec
    transport = await self._make_subprocess_transport(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 200, in _make_subprocess_transport
    watcher = events.get_child_watcher()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 828, in get_child_watcher
    return get_event_loop_policy().get_child_watcher()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 645, in get_child_watcher
    raise NotImplementedError
NotImplementedError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 391, in web_search
    extracted_contents = await self.mcp_client.search_and_extract(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 200, in search_and_extract
    search_results = await self.search_web(query, max_results=max_results)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 104, in search_web
    await self.connect()
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 74, in connect
    await self.stdio_cm.__aexit__(type(e), e, e.__traceback__)
  File "/usr/lib/python3.12/contextlib.py", line 267, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
[2025-11-09 15:21:11,604: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:21:11,605: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:21:11,686: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:21:11,686: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:21:35,930: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:21:35,930: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:21:36,029: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:21:36,030: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:22:01,036: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:22:01,036: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:22:02,017: INFO: mcp_client]: Connected to custom MCP. Available tools: ['firecrawl_search', 'firecrawl_scrape']]
[2025-11-09 15:22:02,169: INFO: mcp_client]: Disconnected from custom MCP server]
[2025-11-09 15:22:08,370: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 15:22:08,371: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 15:22:08,449: INFO: mcp_config]: FIRECRAWL_API_KEY (MCP) validated successfully.]
[2025-11-09 15:22:08,449: INFO: rag_pipeline]: Firecrawl MCP client initialized successfully]
[2025-11-09 15:22:08,492: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 15:22:10,131: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 15:22:10,131: INFO: guardrails]: Validator received text:
What is the Collatz conjecture?...]
[2025-11-09 15:22:10,131: INFO: guardrails]: Validator is using topics:
['mathematics', 'proofs', 'math', 'trigonometry', 'calculus', 'linear algebra', 'number theory', 'algebra', 'geometry', 'statistics', 'theorems', 'arithmetic', 'equations', 'differential equations', 'probability']]
[2025-11-09 15:22:10,136: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 15:22:11,796: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 15:22:11,797: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 15:22:11,799: INFO: rag_pipeline]: Input validation passed.]
[2025-11-09 15:22:11,800: INFO: rag_pipeline]: Retrieving documents for question: What is the Collatz conjecture?]
[2025-11-09 15:22:12,363: INFO: data_storing]: Searching Qdrant with score_threshold: 0.7]
[2025-11-09 15:22:12,369: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 15:22:12,370: INFO: rag_pipeline]: Running web_search node with Firecrawl MCP]
[2025-11-09 15:22:12,370: INFO: rag_pipeline]: Searching web for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 15:22:12,370: INFO: mcp_client]: Running search_and_extract for: math concept explanation: What is the Collatz conjecture?]
[2025-11-09 15:22:12,370: INFO: mcp_client]: Connecting to custom Python (Firecrawl) MCP server...]
[2025-11-09 15:22:12,370: ERROR: mcp_client]: Failed to connect to custom MCP server: ]
[2025-11-09 15:22:12,370: ERROR: rag_pipeline]: Web search failed: generator didn't stop after athrow()]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 57, in connect
    self.read, self.write = await self.stdio_cm.__aenter__()
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 124, in stdio_client
    process = await _create_platform_compatible_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/stdio/__init__.py", line 251, in _create_platform_compatible_process
    process = await anyio.open_process(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_core/_subprocesses.py", line 190, in open_process
    return await get_async_backend().open_process(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 2588, in open_process
    process = await asyncio.create_subprocess_exec(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/subprocess.py", line 224, in create_subprocess_exec
    transport, protocol = await loop.subprocess_exec(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1744, in subprocess_exec
    transport = await self._make_subprocess_transport(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/unix_events.py", line 200, in _make_subprocess_transport
    watcher = events.get_child_watcher()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 828, in get_child_watcher
    return get_event_loop_policy().get_child_watcher()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/events.py", line 645, in get_child_watcher
    raise NotImplementedError
NotImplementedError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/pipeline/rag_pipeline.py", line 391, in web_search
    extracted_contents = await self.mcp_client.search_and_extract(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 200, in search_and_extract
    search_results = await self.search_web(query, max_results=max_results)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 104, in search_web
    await self.connect()
  File "/home/ryefoxlime/MathTutor/tools/mcp_client.py", line 74, in connect
    await self.stdio_cm.__aexit__(type(e), e, e.__traceback__)
  File "/usr/lib/python3.12/contextlib.py", line 267, in __aexit__
    raise RuntimeError("generator didn't stop after athrow()")
RuntimeError: generator didn't stop after athrow()
[2025-11-09 16:55:00,343: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 16:55:00,347: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 16:58:51,891: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 16:58:51,893: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:31:05,081: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:31:05,082: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:31:57,985: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:31:57,985: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:40:19,564: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:40:19,564: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:42:46,871: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:42:46,871: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:54:15,153: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:54:15,153: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:54:15,232: WARNING: test]: MCP config file not found at mcp_config.json. Web search will be disabled.]
[2025-11-09 17:54:15,232: INFO: test]: Create mcp_config.json with your Firecrawl configuration to enable web search.]
[2025-11-09 17:54:15,269: INFO: test]: Building LangGraph workflow...]
[2025-11-09 17:54:15,270: INFO: test]:  Workflow compiled successfully]
[2025-11-09 17:54:15,474: INFO: test]: Inngest functions registered successfully]
[2025-11-09 17:54:15,474: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 17:55:57,681: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:55:57,681: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:55:57,765: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:55:57,769: WARNING: test]: MCP config file not found at mcp_config.json. Web search will be disabled.]
[2025-11-09 17:55:57,769: INFO: test]: Create mcp_config.json with your Firecrawl configuration to enable web search.]
[2025-11-09 17:55:57,797: INFO: test]: Building LangGraph workflow...]
[2025-11-09 17:55:57,798: INFO: test]:  Workflow compiled successfully]
[2025-11-09 17:55:58,001: INFO: test]: Inngest functions registered successfully]
[2025-11-09 17:55:58,001: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 17:57:01,457: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:57:01,458: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:57:01,544: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:57:01,547: INFO: test]: MCP configuration validated successfully]
[2025-11-09 17:57:01,579: INFO: test]: Building LangGraph workflow...]
[2025-11-09 17:57:01,580: INFO: test]:  Workflow compiled successfully]
[2025-11-09 17:57:01,791: INFO: test]: Inngest functions registered successfully]
[2025-11-09 17:57:01,791: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 17:57:11,536: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:57:11,537: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:57:11,614: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:57:11,617: INFO: test]: MCP configuration validated successfully]
[2025-11-09 17:57:11,644: INFO: test]: Building LangGraph workflow...]
[2025-11-09 17:57:11,645: INFO: test]:  Workflow compiled successfully]
[2025-11-09 17:57:11,652: INFO: test]: Inngest functions registered successfully]
[2025-11-09 17:57:11,652: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 17:57:22,056: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:57:22,057: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:57:22,139: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:57:54,460: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:57:54,460: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:57:54,542: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:58:12,207: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 17:58:12,208: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 17:58:12,288: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 17:58:12,291: INFO: test]: MCP configuration validated successfully]
[2025-11-09 17:58:12,317: INFO: test]: Building LangGraph workflow...]
[2025-11-09 17:58:12,318: INFO: test]:  Workflow compiled successfully]
[2025-11-09 17:58:12,323: INFO: test]: Inngest functions registered successfully]
[2025-11-09 17:58:12,323: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 17:58:12,323: INFO: test]: Processing query: 'What is a derivative?...']
[2025-11-09 17:58:12,325: INFO: test]: Running validate_question node]
[2025-11-09 17:58:14,403: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:14,403: INFO: guardrails]: Validator received text:
What is a derivative?...]
[2025-11-09 17:58:14,403: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:14,408: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:16,263: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:16,264: INFO: guardrails]: Validator is returning this list: ['calculus', 'algebra']]
[2025-11-09 17:58:16,266: INFO: test]:  Input validation passed]
[2025-11-09 17:58:16,267: INFO: test]: Retrieving documents for: 'What is a derivative?...']
[2025-11-09 17:58:16,984: INFO: data_storing]: No search results found]
[2025-11-09 17:58:16,984: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 17:58:16,984: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 17:58:16,984: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 17:58:16,985: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 17:58:16,985: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 17:58:16,985: INFO: test]:  MCP client initialized]
[2025-11-09 17:58:16,985: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 17:58:16,986: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 17:58:17,987: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 17:58:17,989: INFO: test]: Running validate_question node]
[2025-11-09 17:58:19,241: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:19,241: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 17:58:19,241: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:19,242: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:19,944: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:19,945: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory']]
[2025-11-09 17:58:19,946: INFO: test]:  Input validation passed]
[2025-11-09 17:58:19,947: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 17:58:20,367: INFO: data_storing]: No search results found]
[2025-11-09 17:58:20,367: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 17:58:20,367: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 17:58:20,367: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 17:58:20,368: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 17:58:20,368: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 17:58:20,368: INFO: test]:  MCP client initialized]
[2025-11-09 17:58:20,368: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 17:58:20,368: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 17:58:21,370: INFO: test]: Processing query: 'What is integration?...']
[2025-11-09 17:58:21,371: INFO: test]: Running validate_question node]
[2025-11-09 17:58:22,453: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:22,453: INFO: guardrails]: Validator received text:
What is integration?...]
[2025-11-09 17:58:22,453: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:22,454: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:23,126: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:23,126: INFO: guardrails]: Validator is returning this list: ['mathematics', 'math']]
[2025-11-09 17:58:23,127: INFO: test]:  Input validation passed]
[2025-11-09 17:58:23,128: INFO: test]: Retrieving documents for: 'What is integration?...']
[2025-11-09 17:58:23,552: INFO: data_storing]: No search results found]
[2025-11-09 17:58:23,552: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 17:58:23,552: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 17:58:23,552: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 17:58:23,553: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 17:58:23,553: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 17:58:23,553: INFO: test]:  MCP client initialized]
[2025-11-09 17:58:23,553: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 17:58:23,554: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 17:58:23,554: INFO: test]: Processing query: 'Can you give me an example?...']
[2025-11-09 17:58:23,554: INFO: test]: Running validate_question node]
[2025-11-09 17:58:24,250: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:24,250: INFO: guardrails]: Validator received text:
Can you give me an example?...]
[2025-11-09 17:58:24,250: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:24,251: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:24,820: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:24,820: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 17:58:24,821: INFO: test]:  Input validation passed]
[2025-11-09 17:58:24,822: INFO: test]: Retrieving documents for: 'Can you give me an example?...']
[2025-11-09 17:58:25,228: INFO: data_storing]: No search results found]
[2025-11-09 17:58:25,229: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 17:58:25,230: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 17:58:25,230: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 17:58:25,231: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 17:58:25,231: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 17:58:25,231: INFO: test]:  MCP client initialized]
[2025-11-09 17:58:25,231: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 17:58:25,231: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 17:58:26,232: INFO: test]: Processing query: 'What's the weather like today?...']
[2025-11-09 17:58:26,234: INFO: test]: Running validate_question node]
[2025-11-09 17:58:27,064: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:27,065: INFO: guardrails]: Validator received text:
What's the weather like today?...]
[2025-11-09 17:58:27,065: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:27,065: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:27,488: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:27,488: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 17:58:27,490: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 17:58:27,491: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 17:58:28,492: INFO: test]: Processing query: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...']
[2025-11-09 17:58:28,492: INFO: test]: Running validate_question node]
[2025-11-09 17:58:30,142: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 17:58:30,142: INFO: guardrails]: Validator received text:
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...]
[2025-11-09 17:58:30,142: INFO: guardrails]: Validator is using topics:
['equations', 'probability', 'statistics', 'trigonometry', 'proofs', 'arithmetic', 'calculus', 'linear algebra', 'mathematics', 'number theory', 'differential equations', 'geometry', 'theorems', 'algebra', 'math']]
[2025-11-09 17:58:30,142: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 17:58:30,593: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 17:58:30,594: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 17:58:30,596: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 17:58:30,596: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:00:07,975: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:00:07,976: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:00:08,056: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:00:08,058: INFO: test]: MCP configuration validated successfully]
[2025-11-09 18:00:08,084: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:00:08,085: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:00:08,090: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:00:08,090: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:00:08,090: INFO: test]: Processing query: 'What is a derivative?...']
[2025-11-09 18:00:08,092: INFO: test]: Running validate_question node]
[2025-11-09 18:00:09,668: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:09,669: INFO: guardrails]: Validator received text:
What is a derivative?...]
[2025-11-09 18:00:09,669: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:09,673: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:10,662: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:10,663: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:00:10,665: INFO: test]:  Input validation passed]
[2025-11-09 18:00:10,666: INFO: test]: Retrieving documents for: 'What is a derivative?...']
[2025-11-09 18:00:11,041: ERROR: test]:  Pipeline execution failed: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}
During task with name 'retrieve' and id 'd2a20850-3420-0346-43e6-130164dc6bd2'
[2025-11-09 18:00:12,046: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:00:12,047: INFO: test]: Running validate_question node]
[2025-11-09 18:00:13,382: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:13,382: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:00:13,382: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:13,383: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:14,042: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:14,042: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:00:14,044: INFO: test]:  Input validation passed]
[2025-11-09 18:00:14,045: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:00:14,180: ERROR: test]:  Pipeline execution failed: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}
During task with name 'retrieve' and id 'f5a28b15-98f7-a349-d7b3-129b09408c95'
[2025-11-09 18:00:15,189: INFO: test]: Processing query: 'What is integration?...']
[2025-11-09 18:00:15,190: INFO: test]: Running validate_question node]
[2025-11-09 18:00:15,921: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:15,921: INFO: guardrails]: Validator received text:
What is integration?...]
[2025-11-09 18:00:15,921: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:15,921: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:16,516: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:16,516: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:00:16,518: INFO: test]:  Input validation passed]
[2025-11-09 18:00:16,519: INFO: test]: Retrieving documents for: 'What is integration?...']
[2025-11-09 18:00:16,639: ERROR: test]:  Pipeline execution failed: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}
During task with name 'retrieve' and id '1dd85233-d19f-e68b-887d-97e530824641'
[2025-11-09 18:00:16,640: INFO: test]: Processing query: 'Can you give me an example?...']
[2025-11-09 18:00:16,641: INFO: test]: Running validate_question node]
[2025-11-09 18:00:17,399: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:17,400: INFO: guardrails]: Validator received text:
Can you give me an example?...]
[2025-11-09 18:00:17,400: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:17,400: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:17,990: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:17,990: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:00:17,991: INFO: test]:  Input validation passed]
[2025-11-09 18:00:17,992: INFO: test]: Retrieving documents for: 'Can you give me an example?...']
[2025-11-09 18:00:18,119: ERROR: test]:  Pipeline execution failed: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. \n* Quota exceeded for metric: generativelanguage.googleapis.com/embed_content_free_tier_requests, limit: 0', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/embed_content_free_tier_requests', 'quotaId': 'EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier'}]}]}}
During task with name 'retrieve' and id '833c8f36-4cfc-f2b8-ad99-0355c9eb1fbc'
[2025-11-09 18:00:19,122: INFO: test]: Processing query: 'What's the weather like today?...']
[2025-11-09 18:00:19,123: INFO: test]: Running validate_question node]
[2025-11-09 18:00:19,776: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:19,777: INFO: guardrails]: Validator received text:
What's the weather like today?...]
[2025-11-09 18:00:19,777: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:19,777: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:20,346: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:20,347: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:00:20,348: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:00:20,349: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:00:21,351: INFO: test]: Processing query: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...']
[2025-11-09 18:00:21,352: INFO: test]: Running validate_question node]
[2025-11-09 18:00:23,178: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:00:23,178: INFO: guardrails]: Validator received text:
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...]
[2025-11-09 18:00:23,178: INFO: guardrails]: Validator is using topics:
['calculus', 'algebra', 'theorems', 'arithmetic', 'linear algebra', 'statistics', 'trigonometry', 'differential equations', 'math', 'probability', 'equations', 'geometry', 'mathematics', 'proofs', 'number theory']]
[2025-11-09 18:00:23,179: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:00:23,942: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:00:23,942: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:00:23,943: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:00:23,945: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:06:53,696: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:06:53,696: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:06:53,774: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:06:53,777: INFO: test]: MCP configuration validated successfully]
[2025-11-09 18:06:53,804: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:06:53,805: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:06:53,810: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:06:53,810: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:06:53,810: INFO: test]: Processing query: 'What is a derivative?...']
[2025-11-09 18:06:53,812: INFO: test]: Running validate_question node]
[2025-11-09 18:06:55,064: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:06:55,065: INFO: guardrails]: Validator received text:
What is a derivative?...]
[2025-11-09 18:06:55,065: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:06:55,069: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:06:56,345: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:06:56,347: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics', 'differential equations', 'calculus']]
[2025-11-09 18:06:56,349: INFO: test]:  Input validation passed]
[2025-11-09 18:06:56,350: INFO: test]: Retrieving documents for: 'What is a derivative?...']
[2025-11-09 18:06:56,531: ERROR: test]:  Pipeline execution failed: 404 Not Found. {'message': '', 'status': 'Not Found'}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 404 Not Found. {'message': '', 'status': 'Not Found'}
During task with name 'retrieve' and id 'e43e5ad0-296e-0d94-98d7-2dae50402667'
[2025-11-09 18:06:57,535: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:06:57,535: INFO: test]: Running validate_question node]
[2025-11-09 18:06:59,205: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:06:59,205: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:06:59,205: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:06:59,206: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:06:59,765: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:06:59,765: INFO: guardrails]: Validator is returning this list: ['number theory']]
[2025-11-09 18:06:59,766: INFO: test]:  Input validation passed]
[2025-11-09 18:06:59,768: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:06:59,864: ERROR: test]:  Pipeline execution failed: 404 Not Found. {'message': '', 'status': 'Not Found'}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 404 Not Found. {'message': '', 'status': 'Not Found'}
During task with name 'retrieve' and id '774233eb-c119-f375-b56c-5724f6692c0c'
[2025-11-09 18:07:00,866: INFO: test]: Processing query: 'What is integration?...']
[2025-11-09 18:07:00,866: INFO: test]: Running validate_question node]
[2025-11-09 18:07:02,107: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:07:02,107: INFO: guardrails]: Validator received text:
What is integration?...]
[2025-11-09 18:07:02,107: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:07:02,107: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:07:02,865: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:07:02,865: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:07:02,866: INFO: test]:  Input validation passed]
[2025-11-09 18:07:02,867: INFO: test]: Retrieving documents for: 'What is integration?...']
[2025-11-09 18:07:02,970: ERROR: test]:  Pipeline execution failed: 404 Not Found. {'message': '', 'status': 'Not Found'}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 404 Not Found. {'message': '', 'status': 'Not Found'}
During task with name 'retrieve' and id '40ff05e6-94d1-121d-fab5-61397f7096b3'
[2025-11-09 18:07:02,971: INFO: test]: Processing query: 'Can you give me an example?...']
[2025-11-09 18:07:02,972: INFO: test]: Running validate_question node]
[2025-11-09 18:07:04,033: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:07:04,033: INFO: guardrails]: Validator received text:
Can you give me an example?...]
[2025-11-09 18:07:04,033: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:07:04,033: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:07:04,613: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:07:04,613: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:07:04,615: INFO: test]:  Input validation passed]
[2025-11-09 18:07:04,616: INFO: test]: Retrieving documents for: 'Can you give me an example?...']
[2025-11-09 18:07:04,710: ERROR: test]:  Pipeline execution failed: 404 Not Found. {'message': '', 'status': 'Not Found'}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 774, in query
    final_state = await self.app_graph.ainvoke(inputs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3182, in ainvoke
    async for chunk in self.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/main.py", line 3000, in astream
    async for _ in runner.atick(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_runner.py", line 304, in atick
    await arun_with_retry(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/pregel/_retry.py", line 137, in arun_with_retry
    return await task.proc.ainvoke(task.input, config)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 705, in ainvoke
    input = await asyncio.create_task(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langgraph/_internal/_runnable.py", line 473, in ainvoke
    ret = await self.afunc(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 611, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/config.py", line 602, in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 327, in retrieve
    query_vec = self.data_loader.embed_query(question)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_ingestion.py", line 36, in embed_query
    response = self.client.models.embed_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/models.py", line 4025, in embed_content
    response = self._api_client.request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1331, in request
    response = self._request(http_request, http_options, stream=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1167, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 420, in exc_check
    raise retry_exc.reraise()
          ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 187, in reraise
    raise self.last_attempt.result()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/_api_client.py", line 1144, in _request_once
    errors.APIError.raise_for_response(response)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/google/genai/errors.py", line 108, in raise_for_response
    raise ClientError(status_code, response_json, response)
google.genai.errors.ClientError: 404 Not Found. {'message': '', 'status': 'Not Found'}
During task with name 'retrieve' and id 'a4a75d6e-d6af-6661-8ac2-3928510cb969'
[2025-11-09 18:07:05,712: INFO: test]: Processing query: 'What's the weather like today?...']
[2025-11-09 18:07:05,713: INFO: test]: Running validate_question node]
[2025-11-09 18:07:06,558: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:07:06,559: INFO: guardrails]: Validator received text:
What's the weather like today?...]
[2025-11-09 18:07:06,559: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:07:06,559: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:07:07,123: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:07:07,124: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:07:07,125: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:07:07,126: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:07:08,128: INFO: test]: Processing query: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...']
[2025-11-09 18:07:08,128: INFO: test]: Running validate_question node]
[2025-11-09 18:07:09,823: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:07:09,823: INFO: guardrails]: Validator received text:
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...]
[2025-11-09 18:07:09,824: INFO: guardrails]: Validator is using topics:
['equations', 'geometry', 'probability', 'number theory', 'trigonometry', 'algebra', 'differential equations', 'calculus', 'proofs', 'statistics', 'theorems', 'math', 'arithmetic', 'mathematics', 'linear algebra']]
[2025-11-09 18:07:09,824: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:07:10,566: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:07:10,566: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:07:10,567: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:07:10,568: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:08:15,862: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:08:15,862: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:08:15,939: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:08:15,941: INFO: test]: MCP configuration validated successfully]
[2025-11-09 18:08:15,968: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:08:15,969: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:08:15,974: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:08:15,974: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:08:15,974: INFO: test]: Processing query: 'What is a derivative?...']
[2025-11-09 18:08:15,975: INFO: test]: Running validate_question node]
[2025-11-09 18:08:17,223: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:17,223: INFO: guardrails]: Validator received text:
What is a derivative?...]
[2025-11-09 18:08:17,223: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:17,228: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:18,671: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:18,673: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:08:18,675: INFO: test]:  Input validation passed]
[2025-11-09 18:08:18,676: INFO: test]: Retrieving documents for: 'What is a derivative?...']
[2025-11-09 18:08:19,443: INFO: data_storing]: No search results found]
[2025-11-09 18:08:19,443: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:08:19,444: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:08:19,444: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:08:19,444: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:08:19,444: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:08:19,444: INFO: test]:  MCP client initialized]
[2025-11-09 18:08:19,444: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:08:19,445: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:08:20,448: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:08:20,448: INFO: test]: Running validate_question node]
[2025-11-09 18:08:21,676: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:21,676: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:08:21,676: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:21,676: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:22,758: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:22,758: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:08:22,759: INFO: test]:  Input validation passed]
[2025-11-09 18:08:22,761: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:08:23,210: INFO: data_storing]: No search results found]
[2025-11-09 18:08:23,210: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:08:23,211: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:08:23,211: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:08:23,211: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:08:23,211: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:08:23,211: INFO: test]:  MCP client initialized]
[2025-11-09 18:08:23,211: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:08:23,212: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:08:24,215: INFO: test]: Processing query: 'What is integration?...']
[2025-11-09 18:08:24,216: INFO: test]: Running validate_question node]
[2025-11-09 18:08:25,270: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:25,270: INFO: guardrails]: Validator received text:
What is integration?...]
[2025-11-09 18:08:25,270: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:25,271: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:25,834: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:25,835: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:08:25,836: INFO: test]:  Input validation passed]
[2025-11-09 18:08:25,837: INFO: test]: Retrieving documents for: 'What is integration?...']
[2025-11-09 18:08:26,270: INFO: data_storing]: No search results found]
[2025-11-09 18:08:26,270: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:08:26,270: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:08:26,270: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:08:26,271: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:08:26,271: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:08:26,271: INFO: test]:  MCP client initialized]
[2025-11-09 18:08:26,271: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:08:26,271: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:08:26,271: INFO: test]: Processing query: 'Can you give me an example?...']
[2025-11-09 18:08:26,272: INFO: test]: Running validate_question node]
[2025-11-09 18:08:27,012: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:27,013: INFO: guardrails]: Validator received text:
Can you give me an example?...]
[2025-11-09 18:08:27,013: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:27,013: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:28,025: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:28,025: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:08:28,026: INFO: test]:  Input validation passed]
[2025-11-09 18:08:28,027: INFO: test]: Retrieving documents for: 'Can you give me an example?...']
[2025-11-09 18:08:28,461: INFO: data_storing]: No search results found]
[2025-11-09 18:08:28,462: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:08:28,462: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:08:28,462: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:08:28,463: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:08:28,463: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:08:28,463: INFO: test]:  MCP client initialized]
[2025-11-09 18:08:28,463: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:08:28,463: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:08:29,464: INFO: test]: Processing query: 'What's the weather like today?...']
[2025-11-09 18:08:29,465: INFO: test]: Running validate_question node]
[2025-11-09 18:08:30,580: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:30,581: INFO: guardrails]: Validator received text:
What's the weather like today?...]
[2025-11-09 18:08:30,581: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:30,581: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:31,623: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:31,623: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:08:31,624: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:08:31,626: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:08:32,627: INFO: test]: Processing query: 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...']
[2025-11-09 18:08:32,628: INFO: test]: Running validate_question node]
[2025-11-09 18:08:34,293: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:08:34,293: INFO: guardrails]: Validator received text:
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...]
[2025-11-09 18:08:34,293: INFO: guardrails]: Validator is using topics:
['trigonometry', 'math', 'proofs', 'number theory', 'algebra', 'arithmetic', 'equations', 'linear algebra', 'geometry', 'theorems', 'differential equations', 'statistics', 'mathematics', 'probability', 'calculus']]
[2025-11-09 18:08:34,294: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:08:35,254: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:08:35,254: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:08:35,255: WARNING: test]:  Input validation failed: Validation failed for field with errors: No valid topic was found.]
[2025-11-09 18:08:35,257: INFO: test]:  Query complete. Answer length: 104, Sources: 0]
[2025-11-09 18:22:23,741: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:22:23,742: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:22:23,818: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:22:23,820: INFO: test]: MCP configuration validated successfully]
[2025-11-09 18:22:23,847: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:22:23,848: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:22:23,853: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:22:23,853: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:22:23,853: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:22:23,855: INFO: test]: Running validate_question node]
[2025-11-09 18:22:25,483: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:22:25,483: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:22:25,484: INFO: guardrails]: Validator is using topics:
['linear algebra', 'calculus', 'arithmetic', 'mathematics', 'trigonometry', 'number theory', 'theorems', 'probability', 'proofs', 'statistics', 'algebra', 'math', 'geometry', 'differential equations', 'equations']]
[2025-11-09 18:22:25,488: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:22:26,640: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:22:26,641: INFO: guardrails]: Validator is returning this list: ['number theory']]
[2025-11-09 18:22:26,643: INFO: test]:  Input validation passed]
[2025-11-09 18:22:26,645: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:22:27,178: INFO: data_storing]: No search results found]
[2025-11-09 18:22:27,178: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:22:27,179: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:22:27,179: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:22:27,179: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:22:27,179: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:22:27,179: INFO: test]:  MCP client initialized]
[2025-11-09 18:22:27,179: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:22:27,180: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:24:02,581: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:24:02,581: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:24:02,662: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:24:02,665: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:24:02,692: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:24:02,693: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:24:02,698: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:24:02,698: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:24:02,698: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:24:02,701: INFO: test]: Running validate_question node]
[2025-11-09 18:24:03,906: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:24:03,906: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:24:03,906: INFO: guardrails]: Validator is using topics:
['proofs', 'trigonometry', 'differential equations', 'algebra', 'probability', 'geometry', 'mathematics', 'number theory', 'statistics', 'equations', 'linear algebra', 'theorems', 'math', 'calculus', 'arithmetic']]
[2025-11-09 18:24:03,911: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:24:05,130: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:24:05,131: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory']]
[2025-11-09 18:24:05,134: INFO: test]:  Input validation passed]
[2025-11-09 18:24:05,135: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:24:05,692: INFO: data_storing]: No search results found]
[2025-11-09 18:24:05,692: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:24:05,692: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:24:05,692: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:24:05,692: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:24:05,693: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:24:05,693: INFO: test]:  MCP client initialized]
[2025-11-09 18:24:05,693: ERROR: test]:  Web search failed: 'url' parameter is required for SSE connection]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 402, in create_session
    raise ValueError(msg)
ValueError: 'url' parameter is required for SSE connection
[2025-11-09 18:24:05,694: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:26:05,923: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:26:05,924: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:26:06,005: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:26:06,008: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:26:06,035: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:26:06,036: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:26:06,041: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:26:06,041: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:26:06,042: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:26:06,045: INFO: test]: Running validate_question node]
[2025-11-09 18:26:07,332: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:26:07,333: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:26:07,333: INFO: guardrails]: Validator is using topics:
['algebra', 'trigonometry', 'theorems', 'linear algebra', 'mathematics', 'number theory', 'math', 'geometry', 'equations', 'calculus', 'arithmetic', 'proofs', 'differential equations', 'statistics', 'probability']]
[2025-11-09 18:26:07,337: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:26:08,291: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:26:08,293: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory']]
[2025-11-09 18:26:08,295: INFO: test]:  Input validation passed]
[2025-11-09 18:26:08,295: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:26:08,831: INFO: data_storing]: No search results found]
[2025-11-09 18:26:08,831: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:26:08,831: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:26:08,831: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:26:08,832: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:26:08,832: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:26:08,832: INFO: test]:  MCP client initialized]
[2025-11-09 18:26:09,040: ERROR: test]:  Web search failed: unhandled errors in a TaskGroup (1 sub-exception)]
  + Exception Group Traceback (most recent call last):
  |   File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
  |     tools = await mcp_client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |   File "/usr/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 409, in create_session
  |     async with _create_streamable_http_session(**params) as session:
  |   File "/usr/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 310, in _create_streamable_http_session
  |     async with (
  |   File "/usr/lib/python3.12/contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/streamable_http.py", line 478, in streamablehttp_client
  |     async with anyio.create_task_group() as tg:
  |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    |     yield
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    |     resp = await self._pool.handle_async_request(req)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpcore/_async/connection_pool.py", line 207, in handle_async_request
    |     raise UnsupportedProtocol(
    | httpcore.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
    | 
    | The above exception was the direct cause of the following exception:
    | 
    | Traceback (most recent call last):
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/streamable_http.py", line 409, in handle_request_async
    |     await self._handle_post_request(ctx)
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/streamable_http.py", line 260, in _handle_post_request
    |     async with ctx.client.stream(
    |   File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    |     return await anext(self.gen)
    |            ^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1583, in stream
    |     response = await self.send(
    |                ^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1629, in send
    |     response = await self._send_handling_auth(
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    |     response = await self._send_handling_redirects(
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    |     response = await self._send_single_request(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_client.py", line 1730, in _send_single_request
    |     response = await transport.handle_async_request(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    |     with map_httpcore_exceptions():
    |   File "/usr/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |   File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    |     raise mapped_exc(message) from exc
    | httpx.UnsupportedProtocol: Request URL is missing an 'http://' or 'https://' protocol.
    +------------------------------------
[2025-11-09 18:26:09,042: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:26:28,682: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:26:28,683: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:26:28,759: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:26:28,761: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:26:28,788: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:26:28,789: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:26:28,794: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:26:28,794: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:26:28,794: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:26:28,796: INFO: test]: Running validate_question node]
[2025-11-09 18:26:30,315: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:26:30,316: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:26:30,316: INFO: guardrails]: Validator is using topics:
['mathematics', 'geometry', 'linear algebra', 'number theory', 'math', 'equations', 'arithmetic', 'statistics', 'probability', 'algebra', 'theorems', 'calculus', 'differential equations', 'proofs', 'trigonometry']]
[2025-11-09 18:26:30,321: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:26:31,366: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:26:31,367: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory']]
[2025-11-09 18:26:31,369: INFO: test]:  Input validation passed]
[2025-11-09 18:26:31,370: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:26:31,882: INFO: data_storing]: No search results found]
[2025-11-09 18:26:31,882: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:26:31,883: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:26:31,883: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:26:31,883: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:26:31,883: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:26:31,884: INFO: test]:  MCP client initialized]
[2025-11-09 18:26:32,123: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:26:32,171: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 18:26:32,171: INFO: test]: Searching for: 'math concept explanation: What is the Collatz conjecture and why is it unsolved?']
[2025-11-09 18:26:37,349: WARNING: test]: LLM decided not to use any tools]
[2025-11-09 18:26:37,349: INFO: test]:  Query complete. Answer length: 123, Sources: 1]
[2025-11-09 18:30:10,806: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:30:10,807: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:30:10,895: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:30:10,897: INFO: test]: MCP configuration validated successfully]
[2025-11-09 18:30:10,926: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:30:10,927: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:30:10,932: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:30:10,932: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:30:10,933: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:30:10,935: INFO: test]: Running validate_question node]
[2025-11-09 18:30:13,664: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:30:13,664: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:30:13,665: INFO: guardrails]: Validator is using topics:
['algebra', 'calculus', 'number theory', 'statistics', 'theorems', 'math', 'geometry', 'equations', 'differential equations', 'arithmetic', 'linear algebra', 'mathematics', 'proofs', 'trigonometry', 'probability']]
[2025-11-09 18:30:13,669: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:30:15,323: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:30:15,324: INFO: guardrails]: Validator is returning this list: ['number theory']]
[2025-11-09 18:30:15,327: INFO: test]:  Input validation passed]
[2025-11-09 18:30:15,328: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:30:15,902: INFO: data_storing]: No search results found]
[2025-11-09 18:30:15,902: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:30:15,903: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:30:15,903: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:30:15,903: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:30:15,903: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:30:15,903: INFO: test]:  MCP client initialized]
[2025-11-09 18:30:15,903: ERROR: test]:  Web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 511, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:30:15,904: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:35:56,273: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:35:56,274: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:35:56,357: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:35:56,359: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:35:56,386: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:35:56,386: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:35:56,391: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:35:56,391: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:35:56,391: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:35:56,393: INFO: test]: Running validate_question node]
[2025-11-09 18:35:57,743: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:35:57,743: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:35:57,743: INFO: guardrails]: Validator is using topics:
['linear algebra', 'trigonometry', 'probability', 'calculus', 'theorems', 'equations', 'statistics', 'proofs', 'arithmetic', 'math', 'number theory', 'differential equations', 'mathematics', 'geometry', 'algebra']]
[2025-11-09 18:35:57,748: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:35:59,250: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:35:59,251: INFO: guardrails]: Validator is returning this list: []]
[2025-11-09 18:35:59,253: INFO: test]:  Input validation passed]
[2025-11-09 18:35:59,254: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:35:59,914: INFO: data_storing]: No search results found]
[2025-11-09 18:35:59,914: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:35:59,914: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:35:59,914: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:35:59,915: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:35:59,915: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:35:59,915: INFO: test]:  MCP client initialized]
[2025-11-09 18:36:00,131: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:36:00,144: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 18:36:00,144: INFO: test]: Searching for: 'math concept explanation: What is the Collatz conjecture and why is it unsolved?']
[2025-11-09 18:36:05,572: WARNING: test]: LLM decided not to use any tools]
[2025-11-09 18:36:05,573: INFO: test]:  Query complete. Answer length: 123, Sources: 1]
[2025-11-09 18:37:04,324: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:37:04,325: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:37:04,404: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:37:04,406: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:37:04,437: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:37:04,438: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:37:04,445: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:37:04,445: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:37:04,445: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:37:04,448: INFO: test]: Running validate_question node]
[2025-11-09 18:37:06,019: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:37:06,020: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:37:06,020: INFO: guardrails]: Validator is using topics:
['equations', 'trigonometry', 'mathematics', 'theorems', 'statistics', 'proofs', 'math', 'linear algebra', 'differential equations', 'algebra', 'arithmetic', 'calculus', 'number theory', 'probability', 'geometry']]
[2025-11-09 18:37:06,025: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:37:07,190: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:37:07,191: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 18:37:07,193: INFO: test]:  Input validation passed]
[2025-11-09 18:37:07,194: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:37:07,723: INFO: data_storing]: No search results found]
[2025-11-09 18:37:07,723: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:37:07,724: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:37:07,724: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:37:07,724: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:37:07,724: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:37:07,725: INFO: test]:  MCP client initialized]
[2025-11-09 18:37:07,945: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:37:07,955: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 18:37:07,955: INFO: test]: Searching for: 'math concept explanation: What is the Collatz conjecture and why is it unsolved?']
[2025-11-09 18:37:10,272: INFO: test]: LLM requested 1 tool call(s)]
[2025-11-09 18:37:10,272: ERROR: test]:  Web search failed: 'MultiServerMCPClient' object has no attribute 'run_tools']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 548, in web_search
    tool_outputs = await mcp_client.run_tools(ai_msg.tool_calls)
                         ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MultiServerMCPClient' object has no attribute 'run_tools'. Did you mean: 'get_tools'?
[2025-11-09 18:37:10,273: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:41:30,352: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:41:30,353: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:41:30,435: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:41:30,437: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:41:30,475: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:41:30,476: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:41:30,482: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:41:30,482: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:41:30,483: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:41:30,487: INFO: test]: Running validate_question node]
[2025-11-09 18:41:32,000: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:41:32,000: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:41:32,000: INFO: guardrails]: Validator is using topics:
['algebra', 'geometry', 'math', 'equations', 'proofs', 'differential equations', 'linear algebra', 'theorems', 'number theory', 'arithmetic', 'probability', 'trigonometry', 'mathematics', 'statistics', 'calculus']]
[2025-11-09 18:41:32,005: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:41:33,518: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:41:33,519: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:41:33,521: INFO: test]:  Input validation passed]
[2025-11-09 18:41:33,522: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:41:34,100: INFO: data_storing]: No search results found]
[2025-11-09 18:41:34,100: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:41:34,101: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:41:34,101: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:41:34,101: INFO: test]:  Running web_search node with Firecrawl MCP]
[2025-11-09 18:41:34,101: INFO: test]: Loading MCP config from mcp_config.json]
[2025-11-09 18:41:34,101: INFO: test]:  MCP client initialized]
[2025-11-09 18:41:34,313: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:41:34,326: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 18:41:34,326: INFO: test]: Searching for: 'math concept explanation: What is the Collatz conjecture and why is it unsolved?']
[2025-11-09 18:41:37,482: INFO: test]: LLM requested 1 tool call(s)]
[2025-11-09 18:41:37,482: ERROR: test]:  Web search failed: 'MultiServerMCPClient' object has no attribute 'run_tools']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 548, in web_search
    tool_outputs = await mcp_client.run_tools(ai_msg.tool_calls)
                         ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MultiServerMCPClient' object has no attribute 'run_tools'. Did you mean: 'get_tools'?
[2025-11-09 18:41:37,483: INFO: test]:  Query complete. Answer length: 103, Sources: 1]
[2025-11-09 18:45:32,060: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:45:32,061: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:45:32,140: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:45:32,142: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:45:32,170: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:45:32,171: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:45:32,175: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:45:32,175: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:45:32,175: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:45:32,177: INFO: test]: Running validate_question node]
[2025-11-09 18:45:33,449: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:45:33,449: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:45:33,449: INFO: guardrails]: Validator is using topics:
['math', 'arithmetic', 'calculus', 'probability', 'mathematics', 'algebra', 'geometry', 'differential equations', 'number theory', 'theorems', 'trigonometry', 'equations', 'proofs', 'statistics', 'linear algebra']]
[2025-11-09 18:45:33,454: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:45:35,164: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:45:35,165: INFO: guardrails]: Validator is returning this list: ['math', 'arithmetic', 'number theory']]
[2025-11-09 18:45:35,167: INFO: test]:  Input validation passed]
[2025-11-09 18:45:35,169: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:45:35,749: INFO: data_storing]: No search results found]
[2025-11-09 18:45:35,749: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:45:35,750: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:45:35,750: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:45:35,750: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 18:45:35,750: INFO: test]:  MCP client initialized]
[2025-11-09 18:45:35,751: ERROR: test]: Firecrawl manual call failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 501, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 18:45:35,753: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 18:47:21,735: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:47:21,736: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:47:21,815: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:47:21,817: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:47:21,845: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:47:21,846: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:47:21,850: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:47:21,850: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:47:21,850: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:47:21,852: INFO: test]: Running validate_question node]
[2025-11-09 18:47:23,078: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:47:23,079: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:47:23,079: INFO: guardrails]: Validator is using topics:
['probability', 'mathematics', 'theorems', 'differential equations', 'trigonometry', 'linear algebra', 'algebra', 'arithmetic', 'proofs', 'geometry', 'math', 'equations', 'number theory', 'statistics', 'calculus']]
[2025-11-09 18:47:23,084: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:47:24,068: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:47:24,070: INFO: guardrails]: Validator is returning this list: ['mathematics', 'math', 'equations']]
[2025-11-09 18:47:24,071: INFO: test]:  Input validation passed]
[2025-11-09 18:47:24,072: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:47:24,600: INFO: data_storing]: No search results found]
[2025-11-09 18:47:24,600: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:47:24,600: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:47:24,600: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:47:24,601: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 18:47:24,601: INFO: test]:  MCP client initialized]
[2025-11-09 18:47:24,818: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:47:24,829: INFO: test]: Running Firecrawl search manually...]
[2025-11-09 18:47:24,830: ERROR: test]: Firecrawl manual call failed: 'MultiServerMCPClient' object has no attribute 'call_tool']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 509, in web_search
    results = await mcp_client.call_tool(
                    ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MultiServerMCPClient' object has no attribute 'call_tool'
[2025-11-09 18:47:24,830: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 18:48:43,008: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:48:43,009: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:48:43,083: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:48:43,086: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:48:43,114: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:48:43,114: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:48:43,118: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:48:43,118: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:48:43,118: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:48:43,120: INFO: test]: Running validate_question node]
[2025-11-09 18:48:44,530: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:48:44,530: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:48:44,530: INFO: guardrails]: Validator is using topics:
['number theory', 'linear algebra', 'theorems', 'math', 'geometry', 'equations', 'statistics', 'calculus', 'mathematics', 'proofs', 'probability', 'algebra', 'trigonometry', 'differential equations', 'arithmetic']]
[2025-11-09 18:48:44,535: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:48:45,515: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:48:45,516: INFO: guardrails]: Validator is returning this list: ['number theory']]
[2025-11-09 18:48:45,517: INFO: test]:  Input validation passed]
[2025-11-09 18:48:45,519: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:48:46,077: INFO: data_storing]: No search results found]
[2025-11-09 18:48:46,077: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:48:46,078: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:48:46,078: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:48:46,078: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 18:48:46,078: INFO: test]:  MCP client initialized]
[2025-11-09 18:48:46,298: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:48:46,307: INFO: test]: Running Firecrawl search manually...]
[2025-11-09 18:48:46,307: ERROR: test]: Firecrawl manual call failed: 'MultiServerMCPClient' object has no attribute 'run_tools']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 509, in web_search
    results = await mcp_client.run_tools(
                    ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MultiServerMCPClient' object has no attribute 'run_tools'. Did you mean: 'get_tools'?
[2025-11-09 18:48:46,308: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 18:55:46,661: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:55:46,662: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:55:46,745: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:55:46,747: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:55:46,775: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:55:46,776: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:55:46,780: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:55:46,780: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:55:46,781: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:55:46,783: INFO: test]: Running validate_question node]
[2025-11-09 18:55:48,922: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:55:48,922: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:55:48,922: INFO: guardrails]: Validator is using topics:
['algebra', 'equations', 'geometry', 'math', 'trigonometry', 'arithmetic', 'probability', 'linear algebra', 'proofs', 'mathematics', 'statistics', 'differential equations', 'calculus', 'theorems', 'number theory']]
[2025-11-09 18:55:48,927: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:55:49,896: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:55:49,898: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 18:55:49,899: INFO: test]:  Input validation passed]
[2025-11-09 18:55:49,900: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:55:50,466: INFO: data_storing]: No search results found]
[2025-11-09 18:55:50,466: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:55:50,467: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:55:50,467: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:55:50,468: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 18:55:50,468: INFO: test]:  MCP client initialized]
[2025-11-09 18:55:50,677: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:55:50,950: ERROR: test]: Firecrawl manual call failed: cannot import name 'create_agent' from 'langchain.agents' (/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/__init__.py)]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 500, in web_search
    from langchain.agents import create_agent
ImportError: cannot import name 'create_agent' from 'langchain.agents' (/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/__init__.py)
[2025-11-09 18:55:50,951: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 18:56:44,976: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 18:56:44,976: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 18:56:45,052: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 18:56:45,055: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 18:56:45,082: INFO: test]: Building LangGraph workflow...]
[2025-11-09 18:56:45,083: INFO: test]:  Workflow compiled successfully]
[2025-11-09 18:56:45,086: INFO: test]: Inngest functions registered successfully]
[2025-11-09 18:56:45,087: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 18:56:45,087: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:56:45,088: INFO: test]: Running validate_question node]
[2025-11-09 18:56:46,507: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 18:56:46,507: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 18:56:46,507: INFO: guardrails]: Validator is using topics:
['probability', 'trigonometry', 'number theory', 'proofs', 'calculus', 'statistics', 'differential equations', 'arithmetic', 'equations', 'algebra', 'math', 'geometry', 'theorems', 'mathematics', 'linear algebra']]
[2025-11-09 18:56:46,513: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 18:56:48,046: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 18:56:48,046: INFO: guardrails]: Validator is returning this list: ['number theory', 'math']]
[2025-11-09 18:56:48,048: INFO: test]:  Input validation passed]
[2025-11-09 18:56:48,049: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 18:56:48,571: INFO: data_storing]: No search results found]
[2025-11-09 18:56:48,571: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 18:56:48,572: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 18:56:48,572: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 18:56:48,572: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 18:56:48,573: INFO: test]:  MCP client initialized]
[2025-11-09 18:56:48,785: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 18:56:49,023: ERROR: test]: Firecrawl manual call failed: create_react_agent() missing 1 required positional argument: 'prompt']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 515, in web_search
    agent = create_react_agent(tools=tools, llm=llm)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: create_react_agent() missing 1 required positional argument: 'prompt'
[2025-11-09 18:56:49,024: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 19:01:43,735: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:01:43,735: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:01:43,819: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:01:43,821: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:01:43,850: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:01:43,851: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:01:43,855: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:01:43,855: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:01:43,855: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:01:43,857: INFO: test]: Running validate_question node]
[2025-11-09 19:01:45,453: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:01:45,453: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:01:45,453: INFO: guardrails]: Validator is using topics:
['math', 'geometry', 'differential equations', 'arithmetic', 'probability', 'linear algebra', 'trigonometry', 'equations', 'proofs', 'statistics', 'number theory', 'mathematics', 'calculus', 'algebra', 'theorems']]
[2025-11-09 19:01:45,458: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:01:47,406: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:01:47,408: INFO: guardrails]: Validator is returning this list: ['math', 'number theory']]
[2025-11-09 19:01:47,409: INFO: test]:  Input validation passed]
[2025-11-09 19:01:47,410: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:01:47,938: INFO: data_storing]: No search results found]
[2025-11-09 19:01:47,938: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:01:47,938: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:01:47,938: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:01:47,939: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:01:47,939: INFO: test]:  MCP client initialized]
[2025-11-09 19:01:48,154: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:01:48,169: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:01:48,380: ERROR: test]:  ReAct Firecrawl web search failed: 'str' object has no attribute 'input_variables']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 519, in web_search
    agent = create_react_agent(tools=tools, llm=llm, prompt=summary_prompt)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/react/agent.py", line 121, in create_react_agent
    prompt.input_variables + list(prompt.partial_variables),
    ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'input_variables'
[2025-11-09 19:01:48,382: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:03:48,962: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:03:48,963: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:03:49,045: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:03:49,047: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:03:49,073: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:03:49,074: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:03:49,078: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:03:49,078: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:03:49,078: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:03:49,080: INFO: test]: Running validate_question node]
[2025-11-09 19:03:50,664: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:03:50,664: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:03:50,664: INFO: guardrails]: Validator is using topics:
['differential equations', 'geometry', 'linear algebra', 'arithmetic', 'proofs', 'equations', 'algebra', 'trigonometry', 'mathematics', 'probability', 'math', 'statistics', 'number theory', 'theorems', 'calculus']]
[2025-11-09 19:03:50,669: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:03:51,803: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:03:51,804: INFO: guardrails]: Validator is returning this list: ['arithmetic', 'mathematics', 'math', 'number theory']]
[2025-11-09 19:03:51,805: INFO: test]:  Input validation passed]
[2025-11-09 19:03:51,806: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:03:52,325: INFO: data_storing]: No search results found]
[2025-11-09 19:03:52,325: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:03:52,325: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:03:52,325: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:03:52,326: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:03:52,326: INFO: test]:  MCP client initialized]
[2025-11-09 19:03:52,545: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:03:52,554: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:03:52,787: ERROR: test]:  ReAct Firecrawl web search failed: Prompt missing required variables: {'tools', 'tool_names', 'agent_scratchpad'}]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 524, in web_search
    agent = create_react_agent(tools=tools, llm=llm, prompt=prompt)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/react/agent.py", line 125, in create_react_agent
    raise ValueError(msg)
ValueError: Prompt missing required variables: {'tools', 'tool_names', 'agent_scratchpad'}
[2025-11-09 19:03:52,788: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:05:31,711: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:05:31,711: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:05:31,791: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:05:31,793: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:05:31,823: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:05:31,823: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:05:31,828: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:05:31,828: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:05:31,828: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:05:31,829: INFO: test]: Running validate_question node]
[2025-11-09 19:05:33,149: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:05:33,150: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:05:33,150: INFO: guardrails]: Validator is using topics:
['number theory', 'mathematics', 'theorems', 'probability', 'math', 'arithmetic', 'geometry', 'differential equations', 'algebra', 'calculus', 'equations', 'proofs', 'linear algebra', 'trigonometry', 'statistics']]
[2025-11-09 19:05:33,154: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:05:34,250: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:05:34,251: INFO: guardrails]: Validator is returning this list: ['number theory', 'mathematics']]
[2025-11-09 19:05:34,252: INFO: test]:  Input validation passed]
[2025-11-09 19:05:34,253: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:05:34,815: INFO: data_storing]: No search results found]
[2025-11-09 19:05:34,816: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:05:34,816: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:05:34,816: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:05:34,816: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:05:34,817: INFO: test]:  MCP client initialized]
[2025-11-09 19:05:35,022: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:05:35,032: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:05:35,249: ERROR: test]:  ReAct Firecrawl web search failed: coroutine raised StopIteration]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 559, in aprep_inputs
    inputs = {next(iter(_input_keys)): inputs}
              ^^^^^^^^^^^^^^^^^^^^^^^
StopIteration

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 541, in web_search
    response = await agent_executor.ainvoke(question)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 200, in ainvoke
    inputs = await self.aprep_inputs(input)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: coroutine raised StopIteration
[2025-11-09 19:05:35,250: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:06:34,175: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:06:34,176: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:06:34,251: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:06:34,253: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:06:34,280: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:06:34,281: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:06:34,285: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:06:34,285: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:06:34,285: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:06:34,286: INFO: test]: Running validate_question node]
[2025-11-09 19:06:36,475: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:06:36,475: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:06:36,475: INFO: guardrails]: Validator is using topics:
['theorems', 'linear algebra', 'number theory', 'equations', 'probability', 'mathematics', 'proofs', 'differential equations', 'trigonometry', 'calculus', 'algebra', 'arithmetic', 'geometry', 'math', 'statistics']]
[2025-11-09 19:06:36,480: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:06:37,606: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:06:37,607: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory']]
[2025-11-09 19:06:37,609: INFO: test]:  Input validation passed]
[2025-11-09 19:06:37,610: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:06:38,187: INFO: data_storing]: No search results found]
[2025-11-09 19:06:38,188: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:06:38,188: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:06:38,188: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:06:38,189: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:06:38,189: INFO: test]:  MCP client initialized]
[2025-11-09 19:06:38,427: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:06:38,440: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:06:38,661: ERROR: test]:  ReAct Firecrawl web search failed: "Input to PromptTemplate is missing variables {'input'}.  Expected: ['agent_scratchpad', 'input'] Received: ['question', 'tool_names', 'intermediate_steps', 'agent_scratchpad']\nNote: if you intended {input} to be part of the string and not a variable, please escape it with double curly braces like: '{{input}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 541, in web_search
    response = await agent_executor.ainvoke(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1491, in _aiter_next_step
    output = await self._action_agent.aplan(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 494, in aplan
    async for chunk in self.runnable.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3677, in astream
    async for chunk in self.atransform(input_aiter(), config, **kwargs):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3659, in atransform
    async for chunk in self._atransform_stream_with_config(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 2478, in _atransform_stream_with_config
    chunk = await coro_with_context(py_anext(iterator), context)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3626, in _atransform
    async for output in final_pipeline:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1616, in atransform
    async for ichunk in input:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5940, in atransform
    async for item in self.bound.atransform(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1616, in atransform
    async for ichunk in input:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1634, in atransform
    async for output in self.astream(final, config, **kwargs):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1176, in astream
    yield await self.ainvoke(input, config, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 240, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 2146, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 193, in _aformat_prompt_with_error_handling
    inner_input_ = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 181, in _validate_input
    raise KeyError(
KeyError: "Input to PromptTemplate is missing variables {'input'}.  Expected: ['agent_scratchpad', 'input'] Received: ['question', 'tool_names', 'intermediate_steps', 'agent_scratchpad']\nNote: if you intended {input} to be part of the string and not a variable, please escape it with double curly braces like: '{{input}}'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT "
[2025-11-09 19:06:38,664: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:09:06,673: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:09:06,674: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:09:06,760: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:09:06,763: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:09:06,792: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:09:06,793: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:09:06,798: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:09:06,798: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:09:06,798: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:09:06,800: INFO: test]: Running validate_question node]
[2025-11-09 19:09:08,418: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:09:08,419: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:09:08,419: INFO: guardrails]: Validator is using topics:
['trigonometry', 'proofs', 'arithmetic', 'calculus', 'math', 'mathematics', 'algebra', 'theorems', 'differential equations', 'statistics', 'equations', 'probability', 'number theory', 'linear algebra', 'geometry']]
[2025-11-09 19:09:08,424: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:09:10,379: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:09:10,380: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics', 'arithmetic', 'number theory']]
[2025-11-09 19:09:10,382: INFO: test]:  Input validation passed]
[2025-11-09 19:09:10,383: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:09:10,942: INFO: data_storing]: No search results found]
[2025-11-09 19:09:10,942: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:09:10,942: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:09:10,942: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:09:10,943: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:09:10,943: INFO: test]:  MCP client initialized]
[2025-11-09 19:09:11,212: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:09:11,221: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:09:16,092: ERROR: test]:  ReAct Firecrawl web search failed: String tool inputs are not allowed when using tools with JSON schema args_schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 549, in web_search
    response = await agent_executor.ainvoke(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 965, in arun
    tool_args, tool_kwargs = self._to_args_and_kwargs(tool_input, tool_call_id)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 772, in _to_args_and_kwargs
    tool_input = self._parse_input(tool_input, tool_call_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 650, in _parse_input
    raise ValueError(msg)
ValueError: String tool inputs are not allowed when using tools with JSON schema args_schema.
[2025-11-09 19:09:16,093: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:11:09,746: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:11:09,747: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:11:09,838: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:11:09,841: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:11:09,869: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:11:09,870: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:11:09,874: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:11:09,874: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:11:09,874: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:11:09,875: INFO: test]: Running validate_question node]
[2025-11-09 19:11:11,446: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:11:11,447: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:11:11,447: INFO: guardrails]: Validator is using topics:
['mathematics', 'statistics', 'arithmetic', 'math', 'equations', 'calculus', 'number theory', 'probability', 'theorems', 'linear algebra', 'geometry', 'trigonometry', 'differential equations', 'proofs', 'algebra']]
[2025-11-09 19:11:11,451: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:11:13,522: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:11:13,524: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 19:11:13,525: INFO: test]:  Input validation passed]
[2025-11-09 19:11:13,526: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:11:14,059: INFO: data_storing]: No search results found]
[2025-11-09 19:11:14,059: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:11:14,059: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:11:14,059: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:11:14,060: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:11:14,060: INFO: test]:  MCP client initialized]
[2025-11-09 19:11:14,274: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:11:14,284: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:11:17,061: ERROR: test]:  ReAct Firecrawl web search failed: String tool inputs are not allowed when using tools with JSON schema args_schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 549, in web_search
    response = await agent_executor.ainvoke(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 965, in arun
    tool_args, tool_kwargs = self._to_args_and_kwargs(tool_input, tool_call_id)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 772, in _to_args_and_kwargs
    tool_input = self._parse_input(tool_input, tool_call_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 650, in _parse_input
    raise ValueError(msg)
ValueError: String tool inputs are not allowed when using tools with JSON schema args_schema.
[2025-11-09 19:11:17,062: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:17:46,475: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:17:46,476: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:17:46,554: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:17:46,557: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:17:46,584: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:17:46,585: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:17:46,588: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:17:46,588: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:17:46,589: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:17:46,591: INFO: test]: Running validate_question node]
[2025-11-09 19:17:48,140: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:17:48,140: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:17:48,140: INFO: guardrails]: Validator is using topics:
['geometry', 'math', 'proofs', 'linear algebra', 'mathematics', 'number theory', 'equations', 'algebra', 'arithmetic', 'trigonometry', 'differential equations', 'theorems', 'statistics', 'calculus', 'probability']]
[2025-11-09 19:17:48,145: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:17:49,642: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:17:49,643: INFO: guardrails]: Validator is returning this list: ['math', 'mathematics', 'number theory']]
[2025-11-09 19:17:49,644: INFO: test]:  Input validation passed]
[2025-11-09 19:17:49,645: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:17:50,211: INFO: data_storing]: No search results found]
[2025-11-09 19:17:50,211: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:17:50,212: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:17:50,212: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:17:50,212: INFO: test]:  Running web_search node with Firecrawl MCP (manual mode)]
[2025-11-09 19:17:50,212: INFO: test]:  MCP client initialized]
[2025-11-09 19:17:50,436: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:17:50,446: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:17:55,332: ERROR: test]:  ReAct Firecrawl web search failed: String tool inputs are not allowed when using tools with JSON schema args_schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 549, in web_search
    response = await agent_executor.ainvoke(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 965, in arun
    tool_args, tool_kwargs = self._to_args_and_kwargs(tool_input, tool_call_id)
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 772, in _to_args_and_kwargs
    tool_input = self._parse_input(tool_input, tool_call_id)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 650, in _parse_input
    raise ValueError(msg)
ValueError: String tool inputs are not allowed when using tools with JSON schema args_schema.
[2025-11-09 19:17:55,334: INFO: test]:  Query complete. Answer length: 51, Sources: 1]
[2025-11-09 19:24:57,823: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:24:57,824: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:24:57,903: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:24:57,905: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:24:57,932: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:24:57,933: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:24:57,937: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:24:57,937: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:24:57,937: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:24:57,939: INFO: test]: Running validate_question node]
[2025-11-09 19:24:59,522: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:24:59,523: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:24:59,523: INFO: guardrails]: Validator is using topics:
['probability', 'algebra', 'geometry', 'proofs', 'theorems', 'trigonometry', 'mathematics', 'equations', 'differential equations', 'arithmetic', 'statistics', 'linear algebra', 'math', 'calculus', 'number theory']]
[2025-11-09 19:24:59,529: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:25:01,319: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:25:01,321: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 19:25:01,322: INFO: test]:  Input validation passed]
[2025-11-09 19:25:01,324: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:25:01,915: INFO: data_storing]: No search results found]
[2025-11-09 19:25:01,915: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:25:01,915: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:25:01,915: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:25:01,916: INFO: test]:  Running structured tool-calling Firecrawl web search]
[2025-11-09 19:25:01,916: INFO: test]:  MCP client initialized]
[2025-11-09 19:25:02,164: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:25:02,174: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:25:06,242: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:25:06,257: ERROR: test]:  Structured Firecrawl web search failed: MCP error -32602: Tool 'firecrawl_search' parameter validation failed: sources.0: Invalid input: expected object, received string. Please check the parameter types and values according to the tool's schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 514, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 290, in call_tool
    call_tool_result = await handler(request)
                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 271, in execute_tool
    raise captured_exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 255, in execute_tool
    call_tool_result = await tool_session.call_tool(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/session.py", line 350, in call_tool
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: MCP error -32602: Tool 'firecrawl_search' parameter validation failed: sources.0: Invalid input: expected object, received string. Please check the parameter types and values according to the tool's schema.
[2025-11-09 19:25:06,260: INFO: test]:  Query complete. Answer length: 62, Sources: 1]
[2025-11-09 19:28:47,791: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:28:47,792: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:28:47,871: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:28:47,874: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:28:47,901: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:28:47,902: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:28:47,906: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:28:47,906: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:28:47,907: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:28:47,909: INFO: test]: Running validate_question node]
[2025-11-09 19:28:49,194: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:28:49,194: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:28:49,194: INFO: guardrails]: Validator is using topics:
['algebra', 'proofs', 'differential equations', 'calculus', 'mathematics', 'probability', 'math', 'theorems', 'arithmetic', 'linear algebra', 'number theory', 'trigonometry', 'equations', 'statistics', 'geometry']]
[2025-11-09 19:28:49,200: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:28:50,421: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:28:50,423: INFO: guardrails]: Validator is returning this list: ['mathematics']]
[2025-11-09 19:28:50,425: INFO: test]:  Input validation passed]
[2025-11-09 19:28:50,426: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:28:50,974: INFO: data_storing]: No search results found]
[2025-11-09 19:28:50,974: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:28:50,974: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:28:50,975: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:28:50,975: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:28:50,975: INFO: test]:  MCP client initialized]
[2025-11-09 19:28:50,975: ERROR: test]:  Structured Firecrawl web search failed: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 495, in web_search
    tools = await mcp_client.get_tools()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/client.py", line 187, in get_tools
    tools_list = await asyncio.gather(*load_mcp_tool_tasks)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 348, in load_mcp_tools
    async with create_session(
  File "/usr/lib/python3.12/contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/sessions.py", line 384, in create_session
    raise ValueError(msg)
ValueError: Configuration error: Missing 'transport' key in server configuration. Each server must include 'transport' with one of: 'stdio', 'sse', 'websocket', 'streamable_http'. Please refer to the langchain-mcp-adapters documentation for more details.
[2025-11-09 19:28:50,976: INFO: test]:  Query complete. Answer length: 34, Sources: 0]
[2025-11-09 19:29:11,610: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:29:11,611: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:29:11,686: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:29:11,689: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:29:11,716: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:29:11,717: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:29:11,722: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:29:11,722: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:29:11,722: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:29:11,723: INFO: test]: Running validate_question node]
[2025-11-09 19:29:12,849: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:29:12,849: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:29:12,849: INFO: guardrails]: Validator is using topics:
['arithmetic', 'proofs', 'trigonometry', 'math', 'differential equations', 'theorems', 'mathematics', 'probability', 'geometry', 'number theory', 'algebra', 'statistics', 'linear algebra', 'equations', 'calculus']]
[2025-11-09 19:29:12,854: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:29:14,437: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:29:14,439: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 19:29:14,441: INFO: test]:  Input validation passed]
[2025-11-09 19:29:14,442: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:29:15,010: INFO: data_storing]: No search results found]
[2025-11-09 19:29:15,010: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:29:15,011: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:29:15,011: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:29:15,011: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:29:15,011: INFO: test]:  MCP client initialized]
[2025-11-09 19:29:15,222: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:29:15,234: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:29:15,234: ERROR: test]:  Structured Firecrawl web search failed: "StructuredTool" object has no field "arun"]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 515, in web_search
    tool.arun = wrapped_run
    ^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/pydantic/main.py", line 997, in __setattr__
    elif (setattr_handler := self._setattr_handler(name, value)) is not None:
                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/pydantic/main.py", line 1044, in _setattr_handler
    raise ValueError(f'"{cls.__name__}" object has no field "{name}"')
ValueError: "StructuredTool" object has no field "arun"
[2025-11-09 19:29:15,235: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:29:15,235: ERROR: test]:  Manual Firecrawl fallback also failed: 'MultiServerMCPClient' object has no attribute 'call_tool']
[2025-11-09 19:29:15,236: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 19:32:21,407: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:32:21,408: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:32:21,492: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:32:21,494: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:32:21,524: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:32:21,525: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:32:21,530: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:32:21,530: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:32:21,530: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:32:21,532: INFO: test]: Running validate_question node]
[2025-11-09 19:32:23,551: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:32:23,551: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:32:23,551: INFO: guardrails]: Validator is using topics:
['calculus', 'theorems', 'proofs', 'math', 'algebra', 'equations', 'probability', 'mathematics', 'trigonometry', 'number theory', 'geometry', 'linear algebra', 'differential equations', 'arithmetic', 'statistics']]
[2025-11-09 19:32:23,556: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:32:25,180: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:32:25,182: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 19:32:25,184: INFO: test]:  Input validation passed]
[2025-11-09 19:32:25,185: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:32:25,769: INFO: data_storing]: No search results found]
[2025-11-09 19:32:25,769: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:32:25,770: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:32:25,770: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:32:25,770: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:32:25,770: INFO: test]:  MCP client initialized]
[2025-11-09 19:32:25,994: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:32:26,004: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:32:26,004: INFO: test]:  Wrapped Firecrawl search tool for valid schema]
[2025-11-09 19:32:26,282: INFO: test]:  Invoking structured Firecrawl agent]
[2025-11-09 19:32:26,285: ERROR: test]:  Structured Firecrawl web search failed: 'Input to ChatPromptTemplate is missing variables {\'"query"\'}.  Expected: [\'"query"\', \'agent_scratchpad\', \'input\'] Received: [\'input\', \'intermediate_steps\', \'agent_scratchpad\']\nNote: if you intended {"query"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"query"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT ']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 560, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1491, in _aiter_next_step
    output = await self._action_agent.aplan(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 612, in aplan
    async for chunk in self.runnable.astream(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3677, in astream
    async for chunk in self.atransform(input_aiter(), config, **kwargs):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3659, in atransform
    async for chunk in self._atransform_stream_with_config(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 2478, in _atransform_stream_with_config
    chunk = await coro_with_context(py_anext(iterator), context)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 3626, in _atransform
    async for output in final_pipeline:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1616, in atransform
    async for ichunk in input:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 5940, in atransform
    async for item in self.bound.atransform(
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1616, in atransform
    async for ichunk in input:
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1634, in atransform
    async for output in self.astream(final, config, **kwargs):
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 1176, in astream
    yield await self.ainvoke(input, config, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 240, in ainvoke
    return await self._acall_with_config(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/runnables/base.py", line 2146, in _acall_with_config
    output: Output = await coro_with_context(coro, context)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 193, in _aformat_prompt_with_error_handling
    inner_input_ = self._validate_input(inner_input)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/prompts/base.py", line 181, in _validate_input
    raise KeyError(
KeyError: 'Input to ChatPromptTemplate is missing variables {\'"query"\'}.  Expected: [\'"query"\', \'agent_scratchpad\', \'input\'] Received: [\'input\', \'intermediate_steps\', \'agent_scratchpad\']\nNote: if you intended {"query"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{"query"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
[2025-11-09 19:32:26,288: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:32:26,311: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:32:31,689: INFO: test]:  Query complete. Answer length: 1445, Sources: 1]
[2025-11-09 19:33:48,294: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:33:48,294: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:33:48,373: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:33:48,375: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:33:48,402: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:33:48,402: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:33:48,407: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:33:48,407: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:33:48,407: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:33:48,409: INFO: test]: Running validate_question node]
[2025-11-09 19:33:49,730: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:33:49,731: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:33:49,731: INFO: guardrails]: Validator is using topics:
['probability', 'mathematics', 'number theory', 'arithmetic', 'linear algebra', 'differential equations', 'proofs', 'geometry', 'math', 'calculus', 'trigonometry', 'theorems', 'statistics', 'algebra', 'equations']]
[2025-11-09 19:33:49,735: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:33:51,296: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:33:51,299: INFO: guardrails]: Validator is returning this list: ['mathematics', 'number theory', 'math']]
[2025-11-09 19:33:51,302: INFO: test]:  Input validation passed]
[2025-11-09 19:33:51,304: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:33:51,939: INFO: data_storing]: No search results found]
[2025-11-09 19:33:51,939: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:33:51,939: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:33:51,939: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:33:51,940: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:33:51,940: INFO: test]:  MCP client initialized]
[2025-11-09 19:33:52,148: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:33:52,160: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:33:52,160: INFO: test]:  Wrapped Firecrawl search tool for valid schema]
[2025-11-09 19:33:52,389: INFO: test]:  Invoking structured Firecrawl agent]
[2025-11-09 19:33:55,138: ERROR: test]:  Structured Firecrawl web search failed: RAGPipeline._build_workflow.<locals>.web_search.<locals>.wrapped_tool() got an unexpected keyword argument 'query']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 560, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: RAGPipeline._build_workflow.<locals>.web_search.<locals>.wrapped_tool() got an unexpected keyword argument 'query'
[2025-11-09 19:33:55,139: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:33:55,158: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:34:55,195: ERROR: test]:  Manual Firecrawl fallback also failed: Tool 'firecrawl_search' execution failed: timeout of 60000ms exceeded]
[2025-11-09 19:34:55,196: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 19:37:04,978: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:37:04,979: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:37:05,055: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:37:05,057: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:37:05,086: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:37:05,087: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:37:05,092: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:37:05,092: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:37:05,092: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:37:05,094: INFO: test]: Running validate_question node]
[2025-11-09 19:37:06,622: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:37:06,622: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:37:06,625: INFO: guardrails]: Validator is using topics:
['differential equations', 'geometry', 'probability', 'calculus', 'algebra', 'proofs', 'linear algebra', 'theorems', 'math', 'equations', 'number theory', 'trigonometry', 'statistics', 'mathematics', 'arithmetic']]
[2025-11-09 19:37:06,630: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:37:08,360: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:37:08,362: INFO: guardrails]: Validator is returning this list: ['math', 'equations', 'number theory']]
[2025-11-09 19:37:08,364: INFO: test]:  Input validation passed]
[2025-11-09 19:37:08,365: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:37:08,902: INFO: data_storing]: No search results found]
[2025-11-09 19:37:08,902: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:37:08,903: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:37:08,903: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:37:08,904: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:37:08,904: INFO: test]:  MCP client initialized]
[2025-11-09 19:37:09,106: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:37:09,115: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:37:09,115: INFO: test]:  Wrapped Firecrawl search tool for valid schema]
[2025-11-09 19:37:09,340: INFO: test]:  Invoking structured Firecrawl agent]
[2025-11-09 19:37:11,859: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:37:11,869: ERROR: test]:  Structured Firecrawl web search failed: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 559, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 512, in wrapped_tool
    return await tool.ainvoke(kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 66, in ainvoke
    return await super().ainvoke(input, config, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 620, in ainvoke
    return await self.arun(tool_input, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 290, in call_tool
    call_tool_result = await handler(request)
                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 271, in execute_tool
    raise captured_exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 255, in execute_tool
    call_tool_result = await tool_session.call_tool(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/session.py", line 350, in call_tool
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.
[2025-11-09 19:37:11,872: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:37:11,889: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:38:12,349: ERROR: test]:  Manual Firecrawl fallback also failed: Tool 'firecrawl_search' execution failed: timeout of 60000ms exceeded]
[2025-11-09 19:38:12,349: INFO: test]:  Query complete. Answer length: 41, Sources: 1]
[2025-11-09 19:39:15,341: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:39:15,342: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:39:15,419: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:39:15,422: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:39:15,449: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:39:15,449: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:39:15,455: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:39:15,455: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:39:15,455: INFO: test]: Processing query: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:39:15,457: INFO: test]: Running validate_question node]
[2025-11-09 19:39:16,743: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:39:16,743: INFO: guardrails]: Validator received text:
What is the Collatz conjecture and why is it unsolved?...]
[2025-11-09 19:39:16,743: INFO: guardrails]: Validator is using topics:
['theorems', 'number theory', 'geometry', 'trigonometry', 'proofs', 'math', 'linear algebra', 'algebra', 'arithmetic', 'probability', 'calculus', 'mathematics', 'statistics', 'equations', 'differential equations']]
[2025-11-09 19:39:16,747: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:39:18,115: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:39:18,116: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 19:39:18,118: INFO: test]:  Input validation passed]
[2025-11-09 19:39:18,119: INFO: test]: Retrieving documents for: 'What is the Collatz conjecture and why is it unsol...']
[2025-11-09 19:39:18,712: INFO: data_storing]: No search results found]
[2025-11-09 19:39:18,712: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:39:18,713: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:39:18,713: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:39:18,714: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:39:18,714: INFO: test]:  MCP client initialized]
[2025-11-09 19:39:18,920: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:39:18,929: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:39:18,929: INFO: test]:  Wrapped Firecrawl search tool for valid schema]
[2025-11-09 19:39:19,145: INFO: test]:  Invoking structured Firecrawl agent]
[2025-11-09 19:39:23,805: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:39:23,814: ERROR: test]:  Structured Firecrawl web search failed: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 562, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 512, in wrapped_tool
    return await tool.ainvoke(kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 66, in ainvoke
    return await super().ainvoke(input, config, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 620, in ainvoke
    return await self.arun(tool_input, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 290, in call_tool
    call_tool_result = await handler(request)
                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 271, in execute_tool
    raise captured_exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 255, in execute_tool
    call_tool_result = await tool_session.call_tool(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/session.py", line 350, in call_tool
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.
[2025-11-09 19:39:23,815: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:39:23,835: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:39:29,633: INFO: test]:  Query complete. Answer length: 1583, Sources: 1]
[2025-11-09 19:42:12,007: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:42:12,007: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:42:12,088: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:42:12,092: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:42:12,120: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:42:12,121: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:42:12,315: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:42:12,315: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:43:01,846: INFO: test]: Starting RAG query function via Inngest]
[2025-11-09 19:43:01,849: INFO: test]: Running validate_question node]
[2025-11-09 19:43:03,347: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:43:03,347: INFO: guardrails]: Validator received text:
What is the laplace series?...]
[2025-11-09 19:43:03,347: INFO: guardrails]: Validator is using topics:
['proofs', 'math', 'statistics', 'differential equations', 'probability', 'theorems', 'algebra', 'mathematics', 'trigonometry', 'arithmetic', 'geometry', 'number theory', 'linear algebra', 'calculus', 'equations']]
[2025-11-09 19:43:03,354: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:43:04,341: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:43:04,342: INFO: guardrails]: Validator is returning this list: ['math']]
[2025-11-09 19:43:04,343: INFO: test]:  Input validation passed]
[2025-11-09 19:43:04,344: INFO: test]: Retrieving documents for: 'What is the laplace series?...']
[2025-11-09 19:43:04,863: ERROR: data_storing]: Search failed: Invalid format specifier '.3f if scores else 0.0' for object of type 'float']
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/src/Math/components/data_storing.py", line 111, in search
    f"Top score: {scores[0]:.3f if scores else 0.0}"
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: Invalid format specifier '.3f if scores else 0.0' for object of type 'float'
[2025-11-09 19:43:04,866: WARNING: test]: No search results returned from Qdrant]
[2025-11-09 19:43:04,866: INFO: test]: Routing decision: KB relevant = False]
[2025-11-09 19:43:04,866: INFO: test]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:43:04,866: INFO: test]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:43:04,867: INFO: test]:  MCP client initialized]
[2025-11-09 19:43:04,885: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:43:04,897: INFO: test]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:43:04,897: INFO: test]:  Wrapped Firecrawl search tool for valid schema]
[2025-11-09 19:43:05,143: INFO: test]:  Invoking structured Firecrawl agent]
[2025-11-09 19:43:07,062: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:43:07,069: ERROR: test]:  Structured Firecrawl web search failed: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.]
Traceback (most recent call last):
  File "/home/ryefoxlime/MathTutor/test.py", line 562, in web_search
    response = await agent_executor.ainvoke({"input": question})
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/chains/base.py", line 220, in ainvoke
    await self._acall(inputs, run_manager=run_manager)
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1681, in _acall
    next_step_output = await self._atake_next_step(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1463, in _atake_next_step
    [
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1546, in _aiter_next_step
    result = await asyncio.gather(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain/agents/agent.py", line 1584, in _aperform_agent_action
    observation = await tool.arun(
                  ^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/test.py", line 512, in wrapped_tool
    return await tool.ainvoke(kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 66, in ainvoke
    return await super().ainvoke(input, config, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 620, in ainvoke
    return await self.arun(tool_input, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 1008, in arun
    raise error_to_raise
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/base.py", line 977, in arun
    response = await coro_with_context(coro, context)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_core/tools/structured.py", line 120, in _arun
    return await self.coroutine(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 290, in call_tool
    call_tool_result = await handler(request)
                       ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 271, in execute_tool
    raise captured_exception
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/langchain_mcp_adapters/tools.py", line 255, in execute_tool
    call_tool_result = await tool_session.call_tool(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/client/session.py", line 350, in call_tool
    result = await self.send_request(
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/ryefoxlime/MathTutor/.venv/lib/python3.12/site-packages/mcp/shared/session.py", line 286, in send_request
    raise McpError(response_or_error.error)
mcp.shared.exceptions.McpError: MCP error -32602: Tool 'firecrawl_extract' parameter validation failed: urls: Invalid input: expected array, received undefined. Please check the parameter types and values according to the tool's schema.
[2025-11-09 19:43:07,072: WARNING: test]:  Falling back to manual Firecrawl search...]
[2025-11-09 19:43:07,092: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:46:38,288: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:46:38,290: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:46:38,371: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:46:38,376: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:46:38,408: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:46:38,409: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:46:38,636: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:46:38,636: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:46:47,794: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:46:47,795: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:46:47,871: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:46:47,875: ERROR: test]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:46:47,906: INFO: test]: Building LangGraph workflow...]
[2025-11-09 19:46:47,907: INFO: test]:  Workflow compiled successfully]
[2025-11-09 19:46:48,127: INFO: test]: Inngest functions registered successfully]
[2025-11-09 19:46:48,127: INFO: test]: RAG Pipeline initialized successfully]
[2025-11-09 19:47:01,018: INFO: common]: yaml file: config/config.yaml loaded successfully]
[2025-11-09 19:47:01,019: INFO: common]: yaml file: params.yaml loaded successfully]
[2025-11-09 19:47:01,104: INFO: data_storing]: Using existing collection: docs]
[2025-11-09 19:47:01,108: ERROR: rag_pipeline]: Invalid MCP config: missing 'mcpServers' key]
[2025-11-09 19:47:01,135: INFO: rag_pipeline]: Building LangGraph workflow...]
[2025-11-09 19:47:01,135: INFO: rag_pipeline]:  Workflow compiled successfully]
[2025-11-09 19:47:01,359: INFO: rag_pipeline]: Inngest functions registered successfully]
[2025-11-09 19:47:01,360: INFO: rag_pipeline]: RAG Pipeline initialized successfully]
[2025-11-09 19:48:18,480: INFO: app]: Received question for /ask: What is Linear Algebra ?]
[2025-11-09 19:48:18,480: INFO: rag_pipeline]: Processing query: 'What is Linear Algebra ?...']
[2025-11-09 19:48:18,482: INFO: rag_pipeline]: Running validate_question node]
[2025-11-09 19:48:20,118: INFO: guardrails]: --- DEBUGGING VALIDATOR ---]
[2025-11-09 19:48:20,118: INFO: guardrails]: Validator received text:
What is Linear Algebra ?...]
[2025-11-09 19:48:20,118: INFO: guardrails]: Validator is using topics:
['mathematics', 'equations', 'theorems', 'number theory', 'geometry', 'arithmetic', 'differential equations', 'calculus', 'trigonometry', 'statistics', 'algebra', 'probability', 'proofs', 'linear algebra', 'math']]
[2025-11-09 19:48:20,123: INFO: utils]: 
LiteLLM completion() model= google/gemma-3-4b-it; provider = openrouter]
[2025-11-09 19:48:21,625: INFO: utils]: Wrapper: Completed Call, calling success_handler]
[2025-11-09 19:48:21,626: INFO: guardrails]: Validator is returning this list: ['linear algebra']]
[2025-11-09 19:48:21,627: INFO: rag_pipeline]:  Input validation passed]
[2025-11-09 19:48:21,628: INFO: rag_pipeline]: Retrieving documents for: 'What is Linear Algebra ?...']
[2025-11-09 19:48:22,184: INFO: data_storing]: No search results found]
[2025-11-09 19:48:22,184: WARNING: rag_pipeline]: No search results returned from Qdrant]
[2025-11-09 19:48:22,185: INFO: rag_pipeline]: Routing decision: KB relevant = False]
[2025-11-09 19:48:22,185: INFO: rag_pipeline]:  Routing to web_search (KB insufficient)]
[2025-11-09 19:48:22,185: INFO: rag_pipeline]:  Running structured Firecrawl web search (MCP + fallback)]
[2025-11-09 19:48:22,185: INFO: rag_pipeline]:  MCP client initialized]
[2025-11-09 19:48:22,204: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:48:22,213: INFO: rag_pipeline]: Available tools: ['firecrawl_scrape', 'firecrawl_map', 'firecrawl_search', 'firecrawl_crawl', 'firecrawl_check_crawl_status', 'firecrawl_extract']]
[2025-11-09 19:48:22,213: INFO: rag_pipeline]:  Firecrawl payload: {'query': 'What is Linear Algebra ?', 'sources': [{'type': 'web'}], 'limit': 5}]
[2025-11-09 19:48:22,232: INFO: streamable_http]: Negotiated protocol version: 2025-06-18]
[2025-11-09 19:48:24,080: INFO: rag_pipeline]:  Firecrawl MCP search completed]
[2025-11-09 19:48:24,179: INFO: rag_pipeline]:  Summarizing Firecrawl search results with LLM...]
[2025-11-09 19:48:32,997: INFO: rag_pipeline]:  Firecrawl web search succeeded and summarized]
[2025-11-09 19:48:32,998: INFO: rag_pipeline]:  Query complete. Answer length: 1458, Sources: 1]
[2025-11-09 19:48:32,998: INFO: app]: Successfully processed /ask request (ID: 53757545-58ff-4495-a86c-65973f807db6)]
